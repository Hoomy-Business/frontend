import{j as e,u as xe,b as He}from"./query-vendor-CNIykozp.js";import{r as s,f as qt,u as Lt}from"./react-vendor-DdYNpgPf.js";import{d as qe,c as F,X as te,e as Kt,u as tt,b as ge,a as zt,g as Ue,f as Se,q,S as we}from"./index-BSTG6X_D.js";import{S as Me,M as Vt}from"./MainLayout-Dp07w-_I.js";import{S as Bt,P as Qt}from"./slider-B--VxL8h.js";import{B as ce}from"./button-B-ZelJyK.js";import{I as rt}from"./input-CHDUk6Su.js";import{S as ke,a as Re,b as Ae,c as Pe,d as $}from"./select-BSws-9Mr.js";import{C as Ee,b as Ht,c as Ut,a as Ge}from"./card-ChNshBDf.js";import{B as U}from"./badge-BTZhvk5j.js";import{o as at,p as Gt,O as Le,q as Ke,r as Wt,s as st,t as nt,v as ot,w as ne,f as G,x as ye,e as Xt,y as lt,z as it,u as ct,g as _e,h as dt,B as Jt,E as Yt,F as Zt,G as er,H as tr,J as rr,K as ar,m as sr,L as nr,M as or,N as lr}from"./ui-vendor-BME24-VV.js";import{A as We,a as Xe}from"./alert-OxPXOA7-.js";import{H as ir}from"./dialog-BsLb2Mph.js";import{a as cr}from"./user-CmdIW5DY.js";import{S as dr}from"./sparkles-B79kKt9T.js";import{T as ur}from"./trending-up-CHyH3HSD.js";import"./Logo-DzEVBPy7.js";import"./building-2-D677uz5C.js";import"./heart-BwsYV72Y.js";import"./map-pin-CChOV3U7.js";import"./maximize-D8kTIRDk.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=qe("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=qe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=qe("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),fr=at,hr=Gt,vr=ot,ut=s.forwardRef(({className:t,...a},r)=>e.jsx(Le,{className:F("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:r}));ut.displayName=Le.displayName;const xr=Kt("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),mt=s.forwardRef(({side:t="right",className:a,children:r,...c},i)=>e.jsxs(vr,{children:[e.jsx(ut,{}),e.jsxs(Ke,{ref:i,className:F(xr({side:t}),a),...c,children:[r,e.jsxs(Wt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mt.displayName=Ke.displayName;const pt=({className:t,...a})=>e.jsx("div",{className:F("flex flex-col space-y-2 text-center sm:text-left",t),...a});pt.displayName="SheetHeader";const ft=s.forwardRef(({className:t,...a},r)=>e.jsx(st,{ref:r,className:F("text-lg font-semibold text-foreground",t),...a}));ft.displayName=st.displayName;const gr=s.forwardRef(({className:t,...a},r)=>e.jsx(nt,{ref:r,className:F("text-sm text-muted-foreground",t),...a}));gr.displayName=nt.displayName;var Ye=1,_r=.9,yr=.8,br=.17,Ie=.1,Fe=.999,jr=.9999,wr=.99,Nr=/[\\\/_+.#"@\[\(\{&]/,Cr=/[\\\/_+.#"@\[\(\{&]/g,Sr=/[\s-]/,ht=/[\s-]/g;function De(t,a,r,c,i,n,u){if(n===a.length)return i===t.length?Ye:wr;var f=`${i},${n}`;if(u[f]!==void 0)return u[f];for(var m=c.charAt(n),p=r.indexOf(m,i),d=0,g,_,S,k;p>=0;)g=De(t,a,r,c,p+1,n+1,u),g>d&&(p===i?g*=Ye:Nr.test(t.charAt(p-1))?(g*=yr,S=t.slice(i,p-1).match(Cr),S&&i>0&&(g*=Math.pow(Fe,S.length))):Sr.test(t.charAt(p-1))?(g*=_r,k=t.slice(i,p-1).match(ht),k&&i>0&&(g*=Math.pow(Fe,k.length))):(g*=br,i>0&&(g*=Math.pow(Fe,p-i))),t.charAt(p)!==a.charAt(n)&&(g*=jr)),(g<Ie&&r.charAt(p-1)===c.charAt(n+1)||c.charAt(n+1)===c.charAt(n)&&r.charAt(p-1)!==c.charAt(n))&&(_=De(t,a,r,c,p+1,n+2,u),_*Ie>g&&(g=_*Ie)),g>d&&(d=g),p=r.indexOf(m,p+1);return u[f]=d,d}function Ze(t){return t.toLowerCase().replace(ht," ")}function kr(t,a,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,De(t,a,Ze(t),Ze(a),0,0,{})}var ve='[cmdk-group=""]',Te='[cmdk-group-items=""]',Rr='[cmdk-group-heading=""]',vt='[cmdk-item=""]',et=`${vt}:not([aria-disabled="true"])`,Oe="cmdk-item-select",de="data-value",Ar=(t,a,r)=>kr(t,a,r),xt=s.createContext(void 0),be=()=>s.useContext(xt),gt=s.createContext(void 0),ze=()=>s.useContext(gt),_t=s.createContext(void 0),yt=s.forwardRef((t,a)=>{let r=ue(()=>{var o,v;return{search:"",value:(v=(o=t.value)!=null?o:t.defaultValue)!=null?v:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),c=ue(()=>new Set),i=ue(()=>new Map),n=ue(()=>new Map),u=ue(()=>new Set),f=bt(t),{label:m,children:p,value:d,onValueChange:g,filter:_,shouldFilter:S,loop:k,disablePointerSelection:L=!1,vimBindings:C=!0,...Q}=t,W=ne(),se=ne(),A=ne(),K=s.useRef(null),N=Lr();oe(()=>{if(d!==void 0){let o=d.trim();r.current.value=o,y.emit()}},[d]),oe(()=>{N(6,pe)},[]);let y=s.useMemo(()=>({subscribe:o=>(u.current.add(o),()=>u.current.delete(o)),snapshot:()=>r.current,setState:(o,v,b)=>{var h,w,j,E;if(!Object.is(r.current[o],v)){if(r.current[o]=v,o==="search")Z(),le(),N(1,z);else if(o==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let P=document.getElementById(A);P?P.focus():(h=document.getElementById(W))==null||h.focus()}if(N(7,()=>{var P;r.current.selectedItemId=(P=J())==null?void 0:P.id,y.emit()}),b||N(5,pe),((w=f.current)==null?void 0:w.value)!==void 0){let P=v??"";(E=(j=f.current).onValueChange)==null||E.call(j,P);return}}y.emit()}},emit:()=>{u.current.forEach(o=>o())}}),[]),X=s.useMemo(()=>({value:(o,v,b)=>{var h;v!==((h=n.current.get(o))==null?void 0:h.value)&&(n.current.set(o,{value:v,keywords:b}),r.current.filtered.items.set(o,H(v,b)),N(2,()=>{le(),y.emit()}))},item:(o,v)=>(c.current.add(o),v&&(i.current.has(v)?i.current.get(v).add(o):i.current.set(v,new Set([o]))),N(3,()=>{Z(),le(),r.current.value||z(),y.emit()}),()=>{n.current.delete(o),c.current.delete(o),r.current.filtered.items.delete(o);let b=J();N(4,()=>{Z(),(b==null?void 0:b.getAttribute("id"))===o&&z(),y.emit()})}),group:o=>(i.current.has(o)||i.current.set(o,new Set),()=>{n.current.delete(o),i.current.delete(o)}),filter:()=>f.current.shouldFilter,label:m||t["aria-label"],getDisablePointerSelection:()=>f.current.disablePointerSelection,listId:W,inputId:A,labelId:se,listInnerRef:K}),[]);function H(o,v){var b,h;let w=(h=(b=f.current)==null?void 0:b.filter)!=null?h:Ar;return o?w(o,r.current.search,v):0}function le(){if(!r.current.search||f.current.shouldFilter===!1)return;let o=r.current.filtered.items,v=[];r.current.filtered.groups.forEach(h=>{let w=i.current.get(h),j=0;w.forEach(E=>{let P=o.get(E);j=Math.max(P,j)}),v.push([h,j])});let b=K.current;Y().sort((h,w)=>{var j,E;let P=h.getAttribute("id"),l=w.getAttribute("id");return((j=o.get(l))!=null?j:0)-((E=o.get(P))!=null?E:0)}).forEach(h=>{let w=h.closest(Te);w?w.appendChild(h.parentElement===w?h:h.closest(`${Te} > *`)):b.appendChild(h.parentElement===b?h:h.closest(`${Te} > *`))}),v.sort((h,w)=>w[1]-h[1]).forEach(h=>{var w;let j=(w=K.current)==null?void 0:w.querySelector(`${ve}[${de}="${encodeURIComponent(h[0])}"]`);j==null||j.parentElement.appendChild(j)})}function z(){let o=Y().find(b=>b.getAttribute("aria-disabled")!=="true"),v=o==null?void 0:o.getAttribute(de);y.setState("value",v||void 0)}function Z(){var o,v,b,h;if(!r.current.search||f.current.shouldFilter===!1){r.current.filtered.count=c.current.size;return}r.current.filtered.groups=new Set;let w=0;for(let j of c.current){let E=(v=(o=n.current.get(j))==null?void 0:o.value)!=null?v:"",P=(h=(b=n.current.get(j))==null?void 0:b.keywords)!=null?h:[],l=H(E,P);r.current.filtered.items.set(j,l),l>0&&w++}for(let[j,E]of i.current)for(let P of E)if(r.current.filtered.items.get(P)>0){r.current.filtered.groups.add(j);break}r.current.filtered.count=w}function pe(){var o,v,b;let h=J();h&&(((o=h.parentElement)==null?void 0:o.firstChild)===h&&((b=(v=h.closest(ve))==null?void 0:v.querySelector(Rr))==null||b.scrollIntoView({block:"nearest"})),h.scrollIntoView({block:"nearest"}))}function J(){var o;return(o=K.current)==null?void 0:o.querySelector(`${vt}[aria-selected="true"]`)}function Y(){var o;return Array.from(((o=K.current)==null?void 0:o.querySelectorAll(et))||[])}function V(o){let v=Y()[o];v&&y.setState("value",v.getAttribute(de))}function ee(o){var v;let b=J(),h=Y(),w=h.findIndex(E=>E===b),j=h[w+o];(v=f.current)!=null&&v.loop&&(j=w+o<0?h[h.length-1]:w+o===h.length?h[0]:h[w+o]),j&&y.setState("value",j.getAttribute(de))}function Ce(o){let v=J(),b=v==null?void 0:v.closest(ve),h;for(;b&&!h;)b=o>0?$r(b,ve):qr(b,ve),h=b==null?void 0:b.querySelector(et);h?y.setState("value",h.getAttribute(de)):ee(o)}let ie=()=>V(Y().length-1),fe=o=>{o.preventDefault(),o.metaKey?ie():o.altKey?Ce(1):ee(1)},he=o=>{o.preventDefault(),o.metaKey?V(0):o.altKey?Ce(-1):ee(-1)};return s.createElement(G.div,{ref:a,tabIndex:-1,...Q,"cmdk-root":"",onKeyDown:o=>{var v;(v=Q.onKeyDown)==null||v.call(Q,o);let b=o.nativeEvent.isComposing||o.keyCode===229;if(!(o.defaultPrevented||b))switch(o.key){case"n":case"j":{C&&o.ctrlKey&&fe(o);break}case"ArrowDown":{fe(o);break}case"p":case"k":{C&&o.ctrlKey&&he(o);break}case"ArrowUp":{he(o);break}case"Home":{o.preventDefault(),V(0);break}case"End":{o.preventDefault(),ie();break}case"Enter":{o.preventDefault();let h=J();if(h){let w=new Event(Oe);h.dispatchEvent(w)}}}}},s.createElement("label",{"cmdk-label":"",htmlFor:X.inputId,id:X.labelId,style:zr},m),Ne(t,o=>s.createElement(gt.Provider,{value:y},s.createElement(xt.Provider,{value:X},o))))}),Pr=s.forwardRef((t,a)=>{var r,c;let i=ne(),n=s.useRef(null),u=s.useContext(_t),f=be(),m=bt(t),p=(c=(r=m.current)==null?void 0:r.forceMount)!=null?c:u==null?void 0:u.forceMount;oe(()=>{if(!p)return f.item(i,u==null?void 0:u.id)},[p]);let d=jt(i,n,[t.value,t.children,n],t.keywords),g=ze(),_=re(N=>N.value&&N.value===d.current),S=re(N=>p||f.filter()===!1?!0:N.search?N.filtered.items.get(i)>0:!0);s.useEffect(()=>{let N=n.current;if(!(!N||t.disabled))return N.addEventListener(Oe,k),()=>N.removeEventListener(Oe,k)},[S,t.onSelect,t.disabled]);function k(){var N,y;L(),(y=(N=m.current).onSelect)==null||y.call(N,d.current)}function L(){g.setState("value",d.current,!0)}if(!S)return null;let{disabled:C,value:Q,onSelect:W,forceMount:se,keywords:A,...K}=t;return s.createElement(G.div,{ref:ye(n,a),...K,id:i,"cmdk-item":"",role:"option","aria-disabled":!!C,"aria-selected":!!_,"data-disabled":!!C,"data-selected":!!_,onPointerMove:C||f.getDisablePointerSelection()?void 0:L,onClick:C?void 0:k},t.children)}),Er=s.forwardRef((t,a)=>{let{heading:r,children:c,forceMount:i,...n}=t,u=ne(),f=s.useRef(null),m=s.useRef(null),p=ne(),d=be(),g=re(S=>i||d.filter()===!1?!0:S.search?S.filtered.groups.has(u):!0);oe(()=>d.group(u),[]),jt(u,f,[t.value,t.heading,m]);let _=s.useMemo(()=>({id:u,forceMount:i}),[i]);return s.createElement(G.div,{ref:ye(f,a),...n,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},r&&s.createElement("div",{ref:m,"cmdk-group-heading":"","aria-hidden":!0,id:p},r),Ne(t,S=>s.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?p:void 0},s.createElement(_t.Provider,{value:_},S))))}),Ir=s.forwardRef((t,a)=>{let{alwaysRender:r,...c}=t,i=s.useRef(null),n=re(u=>!u.search);return!r&&!n?null:s.createElement(G.div,{ref:ye(i,a),...c,"cmdk-separator":"",role:"separator"})}),Fr=s.forwardRef((t,a)=>{let{onValueChange:r,...c}=t,i=t.value!=null,n=ze(),u=re(p=>p.search),f=re(p=>p.selectedItemId),m=be();return s.useEffect(()=>{t.value!=null&&n.setState("search",t.value)},[t.value]),s.createElement(G.input,{ref:a,...c,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":m.listId,"aria-labelledby":m.labelId,"aria-activedescendant":f,id:m.inputId,type:"text",value:i?t.value:u,onChange:p=>{i||n.setState("search",p.target.value),r==null||r(p.target.value)}})}),Tr=s.forwardRef((t,a)=>{let{children:r,label:c="Suggestions",...i}=t,n=s.useRef(null),u=s.useRef(null),f=re(p=>p.selectedItemId),m=be();return s.useEffect(()=>{if(u.current&&n.current){let p=u.current,d=n.current,g,_=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let S=p.offsetHeight;d.style.setProperty("--cmdk-list-height",S.toFixed(1)+"px")})});return _.observe(p),()=>{cancelAnimationFrame(g),_.unobserve(p)}}},[]),s.createElement(G.div,{ref:ye(n,a),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":f,"aria-label":c,id:m.listId},Ne(t,p=>s.createElement("div",{ref:ye(u,m.listInnerRef),"cmdk-list-sizer":""},p)))}),Mr=s.forwardRef((t,a)=>{let{open:r,onOpenChange:c,overlayClassName:i,contentClassName:n,container:u,...f}=t;return s.createElement(at,{open:r,onOpenChange:c},s.createElement(ot,{container:u},s.createElement(Le,{"cmdk-overlay":"",className:i}),s.createElement(Ke,{"aria-label":t.label,"cmdk-dialog":"",className:n},s.createElement(yt,{ref:a,...f}))))}),Dr=s.forwardRef((t,a)=>re(r=>r.filtered.count===0)?s.createElement(G.div,{ref:a,...t,"cmdk-empty":"",role:"presentation"}):null),Or=s.forwardRef((t,a)=>{let{progress:r,children:c,label:i="Loading...",...n}=t;return s.createElement(G.div,{ref:a,...n,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},Ne(t,u=>s.createElement("div",{"aria-hidden":!0},u)))}),T=Object.assign(yt,{List:Tr,Item:Pr,Input:Fr,Group:Er,Separator:Ir,Dialog:Mr,Empty:Dr,Loading:Or});function $r(t,a){let r=t.nextElementSibling;for(;r;){if(r.matches(a))return r;r=r.nextElementSibling}}function qr(t,a){let r=t.previousElementSibling;for(;r;){if(r.matches(a))return r;r=r.previousElementSibling}}function bt(t){let a=s.useRef(t);return oe(()=>{a.current=t}),a}var oe=typeof window>"u"?s.useEffect:s.useLayoutEffect;function ue(t){let a=s.useRef();return a.current===void 0&&(a.current=t()),a}function re(t){let a=ze(),r=()=>t(a.snapshot());return s.useSyncExternalStore(a.subscribe,r,r)}function jt(t,a,r,c=[]){let i=s.useRef(),n=be();return oe(()=>{var u;let f=(()=>{var p;for(let d of r){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(p=d.current.textContent)==null?void 0:p.trim():i.current}})(),m=c.map(p=>p.trim());n.value(t,f,m),(u=a.current)==null||u.setAttribute(de,f),i.current=f}),i}var Lr=()=>{let[t,a]=s.useState(),r=ue(()=>new Map);return oe(()=>{r.current.forEach(c=>c()),r.current=new Map},[t]),(c,i)=>{r.current.set(c,i),a({})}};function Kr(t){let a=t.type;return typeof a=="function"?a(t.props):"render"in a?a.render(t.props):t}function Ne({asChild:t,children:a},r){return t&&s.isValidElement(a)?s.cloneElement(Kr(a),{ref:a.ref},r(a.props.children)):r(a)}var zr={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const wt=s.forwardRef(({className:t,...a},r)=>e.jsx(T,{ref:r,className:F("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...a}));wt.displayName=T.displayName;const Vr=s.forwardRef(({className:t,...a},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Me,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(T.Input,{ref:r,className:F("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...a})]}));Vr.displayName=T.Input.displayName;const Nt=s.forwardRef(({className:t,...a},r)=>e.jsx(T.List,{ref:r,className:F("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...a}));Nt.displayName=T.List.displayName;const $e=s.forwardRef((t,a)=>e.jsx(T.Empty,{ref:a,className:"py-6 text-center text-sm",...t}));$e.displayName=T.Empty.displayName;const Ct=s.forwardRef(({className:t,...a},r)=>e.jsx(T.Group,{ref:r,className:F("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...a}));Ct.displayName=T.Group.displayName;const Br=s.forwardRef(({className:t,...a},r)=>e.jsx(T.Separator,{ref:r,className:F("-mx-1 h-px bg-border",t),...a}));Br.displayName=T.Separator.displayName;const St=s.forwardRef(({className:t,...a},r)=>e.jsx(T.Item,{ref:r,className:F("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...a}));St.displayName=T.Item.displayName;var Ve="Popover",[kt,Ra]=Xt(Ve,[lt]),je=lt(),[Qr,ae]=kt(Ve),Rt=t=>{const{__scopePopover:a,children:r,open:c,defaultOpen:i,onOpenChange:n,modal:u=!1}=t,f=je(a),m=s.useRef(null),[p,d]=s.useState(!1),[g=!1,_]=sr({prop:c,defaultProp:i,onChange:n});return e.jsx(nr,{...f,children:e.jsx(Qr,{scope:a,contentId:ne(),triggerRef:m,open:g,onOpenChange:_,onOpenToggle:s.useCallback(()=>_(S=>!S),[_]),hasCustomAnchor:p,onCustomAnchorAdd:s.useCallback(()=>d(!0),[]),onCustomAnchorRemove:s.useCallback(()=>d(!1),[]),modal:u,children:r})})};Rt.displayName=Ve;var At="PopoverAnchor",Hr=s.forwardRef((t,a)=>{const{__scopePopover:r,...c}=t,i=ae(At,r),n=je(r),{onCustomAnchorAdd:u,onCustomAnchorRemove:f}=i;return s.useEffect(()=>(u(),()=>f()),[u,f]),e.jsx(it,{...n,...c,ref:a})});Hr.displayName=At;var Pt="PopoverTrigger",Et=s.forwardRef((t,a)=>{const{__scopePopover:r,...c}=t,i=ae(Pt,r),n=je(r),u=ct(a,i.triggerRef),f=e.jsx(G.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Dt(i.open),...c,ref:u,onClick:_e(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?f:e.jsx(it,{asChild:!0,...n,children:f})});Et.displayName=Pt;var Be="PopoverPortal",[Ur,Gr]=kt(Be,{forceMount:void 0}),It=t=>{const{__scopePopover:a,forceMount:r,children:c,container:i}=t,n=ae(Be,a);return e.jsx(Ur,{scope:a,forceMount:r,children:e.jsx(dt,{present:r||n.open,children:e.jsx(or,{asChild:!0,container:i,children:c})})})};It.displayName=Be;var me="PopoverContent",Ft=s.forwardRef((t,a)=>{const r=Gr(me,t.__scopePopover),{forceMount:c=r.forceMount,...i}=t,n=ae(me,t.__scopePopover);return e.jsx(dt,{present:c||n.open,children:n.modal?e.jsx(Xr,{...i,ref:a}):e.jsx(Jr,{...i,ref:a})})});Ft.displayName=me;var Wr=lr("PopoverContent.RemoveScroll"),Xr=s.forwardRef((t,a)=>{const r=ae(me,t.__scopePopover),c=s.useRef(null),i=ct(a,c),n=s.useRef(!1);return s.useEffect(()=>{const u=c.current;if(u)return Jt(u)},[]),e.jsx(Yt,{as:Wr,allowPinchZoom:!0,children:e.jsx(Tt,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_e(t.onCloseAutoFocus,u=>{var f;u.preventDefault(),n.current||(f=r.triggerRef.current)==null||f.focus()}),onPointerDownOutside:_e(t.onPointerDownOutside,u=>{const f=u.detail.originalEvent,m=f.button===0&&f.ctrlKey===!0,p=f.button===2||m;n.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:_e(t.onFocusOutside,u=>u.preventDefault(),{checkForDefaultPrevented:!1})})})}),Jr=s.forwardRef((t,a)=>{const r=ae(me,t.__scopePopover),c=s.useRef(!1),i=s.useRef(!1);return e.jsx(Tt,{...t,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var u,f;(u=t.onCloseAutoFocus)==null||u.call(t,n),n.defaultPrevented||(c.current||(f=r.triggerRef.current)==null||f.focus(),n.preventDefault()),c.current=!1,i.current=!1},onInteractOutside:n=>{var m,p;(m=t.onInteractOutside)==null||m.call(t,n),n.defaultPrevented||(c.current=!0,n.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const u=n.target;((p=r.triggerRef.current)==null?void 0:p.contains(u))&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&i.current&&n.preventDefault()}})}),Tt=s.forwardRef((t,a)=>{const{__scopePopover:r,trapFocus:c,onOpenAutoFocus:i,onCloseAutoFocus:n,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:p,onInteractOutside:d,...g}=t,_=ae(me,r),S=je(r);return Zt(),e.jsx(er,{asChild:!0,loop:!0,trapped:c,onMountAutoFocus:i,onUnmountAutoFocus:n,children:e.jsx(tr,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:d,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:p,onDismiss:()=>_.onOpenChange(!1),children:e.jsx(rr,{"data-state":Dt(_.open),role:"dialog",id:_.contentId,...S,...g,ref:a,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Mt="PopoverClose",Yr=s.forwardRef((t,a)=>{const{__scopePopover:r,...c}=t,i=ae(Mt,r);return e.jsx(G.button,{type:"button",...c,ref:a,onClick:_e(t.onClick,()=>i.onOpenChange(!1))})});Yr.displayName=Mt;var Zr="PopoverArrow",ea=s.forwardRef((t,a)=>{const{__scopePopover:r,...c}=t,i=je(r);return e.jsx(ar,{...i,...c,ref:a})});ea.displayName=Zr;function Dt(t){return t?"open":"closed"}var ta=Rt,ra=Et,aa=It,Ot=Ft;const sa=ta,na=ra,$t=s.forwardRef(({className:t,align:a="center",sideOffset:r=4,...c},i)=>e.jsx(aa,{children:e.jsx(Ot,{ref:i,align:a,sideOffset:r,className:F("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...c})}));$t.displayName=Ot.displayName;function oa({value:t,onChange:a,onSelect:r,cantonCode:c,placeholder:i="Rechercher une ville...",disabled:n=!1,className:u,error:f=!1}){const[m,p]=s.useState(!1),[d,g]=s.useState(t),_=s.useRef(null),[S,k]=s.useState(null),{getCityName:L}=tt();s.useEffect(()=>{g(t)},[t]);const{data:C=[],isLoading:Q}=xe({queryKey:["/locations/cities/autocomplete",d,c],queryFn:async()=>{if(!d||d.trim().length<1)return[];const y=new URLSearchParams({query:d});return c&&y.append("canton_code",c),ge("GET",`/locations/cities/autocomplete?${y.toString()}`)},enabled:d.trim().length>=1&&m,staleTime:1e3*60}),W=y=>{const X=y.target.value;g(X),a(X),p(!0),k(null)},se=y=>{k(y),g(L(y.name)),a(y.name),r(y),p(!1)},A=()=>{setTimeout(()=>{p(!1)},200)},K=()=>{d.trim().length>=1&&p(!0)},N=S!==null||d&&C.some(y=>L(y.name)===d||y.name===d)||!d||d.trim().length===0;return e.jsxs("div",{className:F("relative",u),children:[e.jsxs(sa,{open:m,onOpenChange:p,children:[e.jsx(na,{asChild:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx(rt,{ref:_,value:d,onChange:W,onFocus:K,onBlur:A,placeholder:i,disabled:n,className:F(f||!N&&d.trim().length>0?"border-destructive":"")}),e.jsx(mr,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"})]})}),e.jsx($t,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:e.jsx(wt,{children:e.jsx(Nt,{children:Q?e.jsx($e,{children:"Recherche en cours..."}):C.length===0?e.jsx($e,{children:d.trim().length<1?"Tapez au moins 1 caractère":"Aucune ville trouvée"}):e.jsx(Ct,{children:C.map(y=>e.jsxs(St,{value:y.name,onSelect:()=>se(y),className:"cursor-pointer",children:[e.jsx(cr,{className:F("mr-2 h-4 w-4",(S==null?void 0:S.id)===y.id?"opacity-100":"opacity-0")}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:L(y.name)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[y.postal_code," • ",y.canton_name||y.canton_code]})]})]},y.id))})})})})]}),!N&&d.trim().length>0&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:"Veuillez sélectionner une ville dans la liste"})]})}function Aa(){var P;const t=qt(),a=new URLSearchParams(t),[,r]=Lt(),{isAuthenticated:c,isStudent:i}=zt(),{t:n,getCantonName:u,getCityName:f}=tt(),[m,p]=s.useState(a.get("canton")||"___all___"),[d,g]=s.useState(a.get("city_id")||"___all___"),[_,S]=s.useState(a.get("property_type")||"___all___"),[k,L]=s.useState([a.get("max_price")?parseInt(a.get("max_price")):5e3]),[C,Q]=s.useState(a.get("min_rooms")||"___all___"),[W,se]=s.useState(a.get("search")||""),[A,K]=s.useState(a.get("search")||""),N=s.useRef(null);s.useEffect(()=>(N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{K(W)},100),()=>{N.current&&clearTimeout(N.current)}),[W]);const y=s.useRef(!0);s.useEffect(()=>{if(y.current){y.current=!1;return}const l=setTimeout(()=>{const x={};m&&m!=="___all___"&&(x.canton=m),d&&d!=="___all___"&&(x.city_id=d),_&&_!=="___all___"&&(x.property_type=_),k[0]<5e3&&(x.max_price=k[0].toString()),C&&C!=="___all___"&&(x.min_rooms=C),A.trim()&&(x.search=A.trim());const R=new URLSearchParams(x).toString(),M=R?`/properties?${R}`:"/properties",D=R?`?${R}`:"";(t||"")!==D&&r(M)},300);return()=>clearTimeout(l)},[m,d,_,k,C,A,r,t]);const{data:X}=xe({queryKey:["/locations/cantons"],queryFn:async()=>{const l=await ge("GET","/locations/cantons");return Array.isArray(l)?l:l!=null&&l.cantons&&Array.isArray(l.cantons)?l.cantons:[]},staleTime:1e3*60*60,gcTime:1e3*60*60*24}),H=Array.isArray(X)?X:[],{data:le}=xe({queryKey:[`/locations/cities/${m}`],enabled:!!m&&m!=="___all___",queryFn:async()=>{if(!m||m==="___all___")throw new Error("Canton required");const l=await ge("GET",`/locations/cities?canton=${m}`);return Array.isArray(l)?l:l!=null&&l.cities&&Array.isArray(l.cities)?l.cities:[]},staleTime:1e3*60*60,gcTime:1e3*60*60*24}),z=Array.isArray(le)?le:[],Z=s.useMemo(()=>{const l={};m&&m!=="___all___"&&(l.canton=m),d&&d!=="___all___"&&(l.city_id=d),_&&_!=="___all___"&&(l.property_type=_),k[0]<5e3&&(l.max_price=k[0].toString()),C&&C!=="___all___"&&(l.min_rooms=C),A.trim()&&(l.search=A.trim());const x=new URLSearchParams(l).toString();return x?`?${x}`:""},[m,d,_,k,C,A]),{data:pe,isLoading:J,error:Y}=xe({queryKey:["/properties",Z],enabled:!Z.includes("create"),queryFn:async()=>{const l=Ue(),x={};l&&(x.Authorization=`Bearer ${l}`);const M=Se().replace(/\/+$/,""),D=`/properties${Z}`.replace(/^\/+/,""),I=`${M}/${D}`;if(I.includes("/properties/create")||I.includes("/properties/edit"))throw new Error(`Invalid API endpoint: ${I}`);const B=await fetch(I,{headers:x});if(!B.ok){const Qe=await B.json().catch(()=>({error:B.statusText}));throw new Error(Qe.error||Qe.message||B.statusText)}const O=await B.json();return Array.isArray(O)?O:O!=null&&O.properties&&Array.isArray(O.properties)?O.properties:[]},staleTime:1e3*60*3,gcTime:1e3*60*15}),V=Array.isArray(pe)?pe:[],{data:ee,error:Ce}=xe({queryKey:["/favorites"],enabled:c&&i,retry:!1,queryFn:async()=>{const l=Ue();if(!l)throw new Error("No authentication token");const x={Authorization:`Bearer ${l}`},D=`${Se().replace(/\/+$/,"")}/favorites`,I=await fetch(D,{headers:x});if(!I.ok){const O=await I.json().catch(()=>({error:I.statusText}));throw new Error(O.error||O.message||I.statusText)}const B=await I.json();return Array.isArray(B)?B:[]},staleTime:1e3*60*10,gcTime:1e3*60*30}),ie=s.useMemo(()=>!ee||!Array.isArray(ee)?new Set:new Set(ee.map(l=>l.id)),[ee]),fe=He({mutationFn:async l=>ge("POST","/favorites",{property_id:l}),onMutate:async l=>{await q.cancelQueries({queryKey:["/favorites"]});const x=q.getQueryData(["/favorites"]);if(x){const R=q.getQueryCache();let M;for(const D of R.getAll())if(D.queryKey[0]==="/properties"&&Array.isArray(D.state.data)&&(M=D.state.data.find(I=>I.id===l),M))break;!M&&V&&(M=V.find(D=>D.id===l)),M&&q.setQueryData(["/favorites"],[...x,M])}return{previousFavorites:x}},onError:(l,x,R)=>{R!=null&&R.previousFavorites&&q.setQueryData(["/favorites"],R.previousFavorites)},onSettled:()=>{q.invalidateQueries({queryKey:["/favorites"]})}}),he=He({mutationFn:async l=>ge("DELETE",`/favorites/${l}`),onMutate:async l=>{await q.cancelQueries({queryKey:["/favorites"]});const x=q.getQueryData(["/favorites"]);return x&&q.setQueryData(["/favorites"],x.filter(R=>R.id!==l)),{previousFavorites:x}},onError:(l,x,R)=>{R!=null&&R.previousFavorites&&q.setQueryData(["/favorites"],R.previousFavorites)},onSettled:()=>{q.invalidateQueries({queryKey:["/favorites"]})}}),o=s.useCallback(l=>{if(!c||!i){r("/login?redirect=/properties");return}ie.has(l)?he.mutate(l):fe.mutate(l)},[c,i,ie,fe,he,r]),v=s.useMemo(()=>{if(!V)return[];if(!A.trim())return V;const l=A.toLowerCase().trim();return l.length===0?V:V.filter(x=>{var I,B,O;const R=((I=x.title)==null?void 0:I.toLowerCase())||"",M=((B=x.city_name)==null?void 0:B.toLowerCase())||"",D=((O=x.address)==null?void 0:O.toLowerCase())||"";return R.includes(l)||M.includes(l)||D.includes(l)})},[V,A]),b=s.useCallback(l=>{p(l),g("___all___")},[]),h=s.useCallback(()=>{p("___all___"),g("___all___"),S("___all___"),L([5e3]),Q("___all___")},[]),w=s.useMemo(()=>{var l;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:n("properties.canton")}),e.jsxs(ke,{value:m,onValueChange:b,children:[e.jsx(Re,{"data-testid":"select-canton",children:e.jsx(Ae,{placeholder:n("properties.canton.all")})}),e.jsxs(Pe,{children:[e.jsx($,{value:"___all___",children:n("properties.canton.all")}),H==null?void 0:H.map(x=>e.jsx($,{value:x.code,children:u(x)},x.code))]})]})]}),m&&m!=="___all___"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:n("properties.city")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(oa,{value:d!=="___all___"&&d&&Array.isArray(z)&&z.length>0&&((l=z.find(x=>x.id.toString()===d))==null?void 0:l.name)||"",onChange:x=>{x||g("___all___")},onSelect:x=>{g(x.id.toString())},cantonCode:m!=="___all___"?m:void 0,placeholder:n("properties.city.all")}),d!=="___all___"&&e.jsx(ce,{variant:"outline",size:"sm",className:"w-full",onClick:()=>g("___all___"),children:n("properties.city.all")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:n("properties.type")}),e.jsxs(ke,{value:_,onValueChange:S,children:[e.jsx(Re,{"data-testid":"select-type",children:e.jsx(Ae,{placeholder:n("properties.type.all")})}),e.jsxs(Pe,{children:[e.jsx($,{value:"___all___",children:n("properties.type.all")}),e.jsx($,{value:"apartment",children:"Apartment"}),e.jsx($,{value:"house",children:"House"}),e.jsx($,{value:"studio",children:"Studio"}),e.jsx($,{value:"room",children:"Room"}),e.jsx($,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:k[0]>=5e3?"5000+/mois":`CHF ${k[0].toLocaleString()}/mois`}),e.jsx(Bt,{value:k,onValueChange:L,max:5e3,min:200,step:100,"data-testid":"slider-price",className:"cursor-grab active:cursor-grabbing"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:n("properties.rooms.min")}),e.jsxs(ke,{value:C,onValueChange:Q,children:[e.jsx(Re,{"data-testid":"select-rooms",children:e.jsx(Ae,{placeholder:n("properties.rooms.any")})}),e.jsxs(Pe,{children:[e.jsx($,{value:"___all___",children:n("properties.rooms.any")}),e.jsx($,{value:"1",children:"1+"}),e.jsx($,{value:"2",children:"2+"}),e.jsx($,{value:"3",children:"3+"}),e.jsx($,{value:"4",children:"4+"})]})]})]}),e.jsx(ce,{variant:"outline",className:"w-full",onClick:h,"data-testid":"button-clear-filters",children:n("properties.clear")})]})},[m,d,_,k,C,H,z,b,h,n,u,f]),j=s.useMemo(()=>{let l=0;return m&&m!=="___all___"&&l++,d&&d!=="___all___"&&l++,_&&_!=="___all___"&&l++,k[0]<5e3&&l++,C&&C!=="___all___"&&l++,A.trim()&&l++,l},[m,d,_,k,C,A]),E=s.useMemo(()=>{if(!v||v.length===0)return 0;const l=v.reduce((x,R)=>x+(R.price||0),0);return Math.round(l/v.length)},[v]);return e.jsx(Vt,{children:e.jsxs("div",{className:"container mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2 flex items-center gap-3","data-testid":"text-page-title",children:[e.jsx(ir,{className:"h-6 w-6 sm:h-7 sm:w-7 text-primary"}),n("properties.title")]}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:J?e.jsx("span",{className:"flex items-center gap-2",children:e.jsx("span",{className:"animate-pulse",children:"Chargement..."})}):v.length===1?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-4 w-4 text-primary"}),n("properties.subtitle.singular",{count:v.length})]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ur,{className:"h-4 w-4 text-primary"}),n("properties.subtitle.plural",{count:v.length}),E>0&&e.jsxs("span",{className:"ml-2 text-primary font-semibold",children:["• Prix moyen: CHF ",E.toLocaleString(),"/mois"]})]})})]})}),j>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[e.jsxs(U,{variant:"secondary",className:"gap-1",children:[e.jsx(pr,{className:"h-3 w-3"}),j," filtre",j>1?"s":""," actif",j>1?"s":""]}),m&&m!=="___all___"&&Array.isArray(H)&&H.length>0&&e.jsxs(U,{variant:"outline",className:"gap-1",children:[u(H.find(l=>l.code===m)||{code:m,name_fr:m,name_de:m}),e.jsx("button",{onClick:()=>b("___all___"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(te,{className:"h-3 w-3"})})]}),d&&d!=="___all___"&&Array.isArray(z)&&z.length>0&&e.jsxs(U,{variant:"outline",className:"gap-1",children:[f(((P=z.find(l=>l.id.toString()===d))==null?void 0:P.name)||""),e.jsx("button",{onClick:()=>g("___all___"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(te,{className:"h-3 w-3"})})]}),_&&_!=="___all___"&&e.jsxs(U,{variant:"outline",className:"gap-1",children:[_,e.jsx("button",{onClick:()=>S("___all___"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(te,{className:"h-3 w-3"})})]}),k[0]<5e3&&e.jsxs(U,{variant:"outline",className:"gap-1",children:[k[0].toLocaleString(),"/mois",e.jsx("button",{onClick:()=>L([5e3]),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(te,{className:"h-3 w-3"})})]}),k[0]>=5e3&&e.jsx(U,{variant:"outline",children:"5000+/mois"}),C&&C!=="___all___"&&e.jsxs(U,{variant:"outline",className:"gap-1",children:[C,"+ pièces",e.jsx("button",{onClick:()=>Q("___all___"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(te,{className:"h-3 w-3"})})]}),A.trim()&&e.jsxs(U,{variant:"outline",className:"gap-1",children:['"',A,'"',e.jsx("button",{onClick:()=>se(""),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(te,{className:"h-3 w-3"})})]}),e.jsx(ce,{variant:"ghost",size:"sm",onClick:h,className:"h-6 text-xs",children:"Tout effacer"})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6",children:[e.jsx("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:e.jsxs(Ee,{className:"sticky top-20 border-2",children:[e.jsx(Ht,{className:"bg-muted/50",children:e.jsxs(Ut,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-5 w-5 text-primary"}),n("properties.filters"),j>0&&e.jsx(U,{variant:"default",className:"ml-auto",children:j})]})}),e.jsx(Ge,{className:"pt-6",children:w})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx(Me,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(rt,{placeholder:n("properties.search.placeholder"),value:W,onChange:l=>se(l.target.value),className:"pl-9 sm:pl-10 h-9 sm:h-10 text-sm sm:text-base","data-testid":"input-search"})]}),e.jsxs(fr,{children:[e.jsx(hr,{asChild:!0,children:e.jsxs(ce,{variant:"outline",className:"lg:hidden h-9 sm:h-10 active:scale-95 transition-transform duration-100 relative",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:n("properties.filters")}),e.jsx("span",{className:"xs:hidden",children:"Filters"}),j>0&&e.jsx(U,{variant:"default",className:"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center text-xs",children:j})]})}),e.jsxs(mt,{side:"left",children:[e.jsx(pt,{children:e.jsx(ft,{children:n("properties.filters")})}),e.jsx("div",{className:"mt-6",children:w})]})]})]}),Y?e.jsx(We,{variant:"destructive",className:"mb-4",children:e.jsx(Xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"Erreur de chargement"}),e.jsx("p",{className:"text-sm",children:Y instanceof Error?Y.message:"Erreur inconnue"}),e.jsxs("p",{className:"text-xs mt-2 text-muted-foreground",children:["URL: ",Se(),"/properties",Z]})]}),e.jsx(ce,{variant:"outline",size:"sm",onClick:()=>q.invalidateQueries({queryKey:["/properties"]}),children:"Réessayer"})]})})}):J?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(l=>e.jsxs(Ee,{children:[e.jsx(we,{className:"aspect-[4/3] w-full"}),e.jsxs(Ge,{className:"p-4 space-y-3",children:[e.jsx(we,{className:"h-5 w-3/4"}),e.jsx(we,{className:"h-4 w-1/2"}),e.jsx(we,{className:"h-4 w-full"})]})]},l))}):v.length===0?e.jsx(Ee,{className:"p-6 sm:p-8 md:p-12 text-center border-dashed",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center",children:e.jsx(Me,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:n("properties.empty")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n("properties.empty.subtitle")}),j>0&&e.jsx(We,{className:"max-w-md mx-auto mb-4",children:e.jsx(Xe,{className:"text-center",children:"Aucune propriété ne correspond à vos critères. Essayez de modifier vos filtres."})}),e.jsxs(ce,{onClick:h,variant:"outline",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Réinitialiser les filtres"]})]})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5 md:gap-6",children:v.map(l=>e.jsx(Qt,{property:l,isFavorited:c&&i?ie.has(l.id):!1,onFavoriteToggle:o},l.id))})]})]})]})})}export{Aa as default};
