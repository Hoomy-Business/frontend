import{j as e,u as fe,b as ze}from"./query-vendor-CNIykozp.js";import{r as s,f as Mt,u as Ot}from"./react-vendor-DdYNpgPf.js";import{d as Oe,c as A,X,e as $t,u as Je,b as he,a as Dt,g as Ve,f as we,q as $,S as be}from"./index-Co9HXm8e.js";import{S as Ie,M as qt}from"./MainLayout-BqPj5A1Q.js";import{S as Lt,P as Kt}from"./slider-CMEQ17eX.js";import{B as ie}from"./button-B8zoFJtu.js";import{I as Ye}from"./input-CYFS7xjh.js";import{S as Ne,a as Ce,b as Se,c as ke,d as O}from"./select-uXq2eEJp.js";import{C as Re,b as zt,c as Vt,a as Be}from"./card-BTGRRs4F.js";import{B}from"./badge-BSblSpJG.js";import{o as Ze,p as Bt,O as $e,q as De,r as Qt,s as et,t as tt,v as rt,w as te,f as Q,x as xe,e as Ht,y as at,z as st,u as nt,g as ve,h as ot,B as Ut,E as Gt,F as Wt,G as Xt,H as Jt,J as Yt,K as Zt,m as er,L as tr,M as rr,N as ar}from"./ui-vendor-BME24-VV.js";import{A as Qe,a as He}from"./alert-pa1NVYRn.js";import{H as sr}from"./dialog-CiwGFzKL.js";import{a as nr}from"./user-70LQggi4.js";import{S as or}from"./sparkles-DTDwz1YV.js";import{T as lr}from"./trending-up-DktijrWP.js";import"./Logo-Bhe2__w3.js";import"./building-2-io5-MBU8.js";import"./heart-C5VARFXK.js";import"./map-pin-DSbG-QSc.js";import"./maximize-Be3afR8P.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Oe("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=Oe("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),dr=Ze,ur=Bt,mr=rt,lt=s.forwardRef(({className:t,...a},r)=>e.jsx($e,{className:A("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:r}));lt.displayName=$e.displayName;const pr=$t("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),it=s.forwardRef(({side:t="right",className:a,children:r,...c},i)=>e.jsxs(mr,{children:[e.jsx(lt,{}),e.jsxs(De,{ref:i,className:A(pr({side:t}),a),...c,children:[r,e.jsxs(Qt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));it.displayName=De.displayName;const ct=({className:t,...a})=>e.jsx("div",{className:A("flex flex-col space-y-2 text-center sm:text-left",t),...a});ct.displayName="SheetHeader";const dt=s.forwardRef(({className:t,...a},r)=>e.jsx(et,{ref:r,className:A("text-lg font-semibold text-foreground",t),...a}));dt.displayName=et.displayName;const fr=s.forwardRef(({className:t,...a},r)=>e.jsx(tt,{ref:r,className:A("text-sm text-muted-foreground",t),...a}));fr.displayName=tt.displayName;var Ge=1,hr=.9,vr=.8,xr=.17,Pe=.1,Ee=.999,gr=.9999,_r=.99,yr=/[\\\/_+.#"@\[\(\{&]/,br=/[\\\/_+.#"@\[\(\{&]/g,jr=/[\s-]/,ut=/[\s-]/g;function Fe(t,a,r,c,i,n,u){if(n===a.length)return i===t.length?Ge:_r;var f=`${i},${n}`;if(u[f]!==void 0)return u[f];for(var m=c.charAt(n),p=r.indexOf(m,i),d=0,y,b,S,k;p>=0;)y=Fe(t,a,r,c,p+1,n+1,u),y>d&&(p===i?y*=Ge:yr.test(t.charAt(p-1))?(y*=vr,S=t.slice(i,p-1).match(br),S&&i>0&&(y*=Math.pow(Ee,S.length))):jr.test(t.charAt(p-1))?(y*=hr,k=t.slice(i,p-1).match(ut),k&&i>0&&(y*=Math.pow(Ee,k.length))):(y*=xr,i>0&&(y*=Math.pow(Ee,p-i))),t.charAt(p)!==a.charAt(n)&&(y*=gr)),(y<Pe&&r.charAt(p-1)===c.charAt(n+1)||c.charAt(n+1)===c.charAt(n)&&r.charAt(p-1)!==c.charAt(n))&&(b=Fe(t,a,r,c,p+1,n+2,u),b*Pe>y&&(y=b*Pe)),y>d&&(d=y),p=r.indexOf(m,p+1);return u[f]=d,d}function We(t){return t.toLowerCase().replace(ut," ")}function wr(t,a,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,Fe(t,a,We(t),We(a),0,0,{})}var pe='[cmdk-group=""]',Ae='[cmdk-group-items=""]',Nr='[cmdk-group-heading=""]',mt='[cmdk-item=""]',Xe=`${mt}:not([aria-disabled="true"])`,Te="cmdk-item-select",ce="data-value",Cr=(t,a,r)=>wr(t,a,r),pt=s.createContext(void 0),ge=()=>s.useContext(pt),ft=s.createContext(void 0),qe=()=>s.useContext(ft),ht=s.createContext(void 0),vt=s.forwardRef((t,a)=>{let r=de(()=>{var o,x;return{search:"",value:(x=(o=t.value)!=null?o:t.defaultValue)!=null?x:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),c=de(()=>new Set),i=de(()=>new Map),n=de(()=>new Map),u=de(()=>new Set),f=xt(t),{label:m,children:p,value:d,onValueChange:y,filter:b,shouldFilter:S,loop:k,disablePointerSelection:D=!1,vimBindings:C=!0,...V}=t,H=te(),Z=te(),R=te(),q=s.useRef(null),N=Or();re(()=>{if(d!==void 0){let o=d.trim();r.current.value=o,j.emit()}},[d]),re(()=>{N(6,se)},[]);let j=s.useMemo(()=>({subscribe:o=>(u.current.add(o),()=>u.current.delete(o)),snapshot:()=>r.current,setState:(o,x,g)=>{var v,w,l,h;if(!Object.is(r.current[o],x)){if(r.current[o]=x,o==="search")ae(),G(),N(1,L);else if(o==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let _=document.getElementById(R);_?_.focus():(v=document.getElementById(H))==null||v.focus()}if(N(7,()=>{var _;r.current.selectedItemId=(_=K())==null?void 0:_.id,j.emit()}),g||N(5,se),((w=f.current)==null?void 0:w.value)!==void 0){let _=x??"";(h=(l=f.current).onValueChange)==null||h.call(l,_);return}}j.emit()}},emit:()=>{u.current.forEach(o=>o())}}),[]),F=s.useMemo(()=>({value:(o,x,g)=>{var v;x!==((v=n.current.get(o))==null?void 0:v.value)&&(n.current.set(o,{value:x,keywords:g}),r.current.filtered.items.set(o,U(x,g)),N(2,()=>{G(),j.emit()}))},item:(o,x)=>(c.current.add(o),x&&(i.current.has(x)?i.current.get(x).add(o):i.current.set(x,new Set([o]))),N(3,()=>{ae(),G(),r.current.value||L(),j.emit()}),()=>{n.current.delete(o),c.current.delete(o),r.current.filtered.items.delete(o);let g=K();N(4,()=>{ae(),(g==null?void 0:g.getAttribute("id"))===o&&L(),j.emit()})}),group:o=>(i.current.has(o)||i.current.set(o,new Set),()=>{n.current.delete(o),i.current.delete(o)}),filter:()=>f.current.shouldFilter,label:m||t["aria-label"],getDisablePointerSelection:()=>f.current.disablePointerSelection,listId:H,inputId:R,labelId:Z,listInnerRef:q}),[]);function U(o,x){var g,v;let w=(v=(g=f.current)==null?void 0:g.filter)!=null?v:Cr;return o?w(o,r.current.search,x):0}function G(){if(!r.current.search||f.current.shouldFilter===!1)return;let o=r.current.filtered.items,x=[];r.current.filtered.groups.forEach(v=>{let w=i.current.get(v),l=0;w.forEach(h=>{let _=o.get(h);l=Math.max(_,l)}),x.push([v,l])});let g=q.current;ne().sort((v,w)=>{var l,h;let _=v.getAttribute("id"),P=w.getAttribute("id");return((l=o.get(P))!=null?l:0)-((h=o.get(_))!=null?h:0)}).forEach(v=>{let w=v.closest(Ae);w?w.appendChild(v.parentElement===w?v:v.closest(`${Ae} > *`)):g.appendChild(v.parentElement===g?v:v.closest(`${Ae} > *`))}),x.sort((v,w)=>w[1]-v[1]).forEach(v=>{var w;let l=(w=q.current)==null?void 0:w.querySelector(`${pe}[${ce}="${encodeURIComponent(v[0])}"]`);l==null||l.parentElement.appendChild(l)})}function L(){let o=ne().find(g=>g.getAttribute("aria-disabled")!=="true"),x=o==null?void 0:o.getAttribute(ce);j.setState("value",x||void 0)}function ae(){var o,x,g,v;if(!r.current.search||f.current.shouldFilter===!1){r.current.filtered.count=c.current.size;return}r.current.filtered.groups=new Set;let w=0;for(let l of c.current){let h=(x=(o=n.current.get(l))==null?void 0:o.value)!=null?x:"",_=(v=(g=n.current.get(l))==null?void 0:g.keywords)!=null?v:[],P=U(h,_);r.current.filtered.items.set(l,P),P>0&&w++}for(let[l,h]of i.current)for(let _ of h)if(r.current.filtered.items.get(_)>0){r.current.filtered.groups.add(l);break}r.current.filtered.count=w}function se(){var o,x,g;let v=K();v&&(((o=v.parentElement)==null?void 0:o.firstChild)===v&&((g=(x=v.closest(pe))==null?void 0:x.querySelector(Nr))==null||g.scrollIntoView({block:"nearest"})),v.scrollIntoView({block:"nearest"}))}function K(){var o;return(o=q.current)==null?void 0:o.querySelector(`${mt}[aria-selected="true"]`)}function ne(){var o;return Array.from(((o=q.current)==null?void 0:o.querySelectorAll(Xe))||[])}function ee(o){let x=ne()[o];x&&j.setState("value",x.getAttribute(ce))}function oe(o){var x;let g=K(),v=ne(),w=v.findIndex(h=>h===g),l=v[w+o];(x=f.current)!=null&&x.loop&&(l=w+o<0?v[v.length-1]:w+o===v.length?v[0]:v[w+o]),l&&j.setState("value",l.getAttribute(ce))}function me(o){let x=K(),g=x==null?void 0:x.closest(pe),v;for(;g&&!v;)g=o>0?Tr(g,pe):Mr(g,pe),v=g==null?void 0:g.querySelector(Xe);v?j.setState("value",v.getAttribute(ce)):oe(o)}let ye=()=>ee(ne().length-1),T=o=>{o.preventDefault(),o.metaKey?ye():o.altKey?me(1):oe(1)},le=o=>{o.preventDefault(),o.metaKey?ee(0):o.altKey?me(-1):oe(-1)};return s.createElement(Q.div,{ref:a,tabIndex:-1,...V,"cmdk-root":"",onKeyDown:o=>{var x;(x=V.onKeyDown)==null||x.call(V,o);let g=o.nativeEvent.isComposing||o.keyCode===229;if(!(o.defaultPrevented||g))switch(o.key){case"n":case"j":{C&&o.ctrlKey&&T(o);break}case"ArrowDown":{T(o);break}case"p":case"k":{C&&o.ctrlKey&&le(o);break}case"ArrowUp":{le(o);break}case"Home":{o.preventDefault(),ee(0);break}case"End":{o.preventDefault(),ye();break}case"Enter":{o.preventDefault();let v=K();if(v){let w=new Event(Te);v.dispatchEvent(w)}}}}},s.createElement("label",{"cmdk-label":"",htmlFor:F.inputId,id:F.labelId,style:Dr},m),je(t,o=>s.createElement(ft.Provider,{value:j},s.createElement(pt.Provider,{value:F},o))))}),Sr=s.forwardRef((t,a)=>{var r,c;let i=te(),n=s.useRef(null),u=s.useContext(ht),f=ge(),m=xt(t),p=(c=(r=m.current)==null?void 0:r.forceMount)!=null?c:u==null?void 0:u.forceMount;re(()=>{if(!p)return f.item(i,u==null?void 0:u.id)},[p]);let d=gt(i,n,[t.value,t.children,n],t.keywords),y=qe(),b=J(N=>N.value&&N.value===d.current),S=J(N=>p||f.filter()===!1?!0:N.search?N.filtered.items.get(i)>0:!0);s.useEffect(()=>{let N=n.current;if(!(!N||t.disabled))return N.addEventListener(Te,k),()=>N.removeEventListener(Te,k)},[S,t.onSelect,t.disabled]);function k(){var N,j;D(),(j=(N=m.current).onSelect)==null||j.call(N,d.current)}function D(){y.setState("value",d.current,!0)}if(!S)return null;let{disabled:C,value:V,onSelect:H,forceMount:Z,keywords:R,...q}=t;return s.createElement(Q.div,{ref:xe(n,a),...q,id:i,"cmdk-item":"",role:"option","aria-disabled":!!C,"aria-selected":!!b,"data-disabled":!!C,"data-selected":!!b,onPointerMove:C||f.getDisablePointerSelection()?void 0:D,onClick:C?void 0:k},t.children)}),kr=s.forwardRef((t,a)=>{let{heading:r,children:c,forceMount:i,...n}=t,u=te(),f=s.useRef(null),m=s.useRef(null),p=te(),d=ge(),y=J(S=>i||d.filter()===!1?!0:S.search?S.filtered.groups.has(u):!0);re(()=>d.group(u),[]),gt(u,f,[t.value,t.heading,m]);let b=s.useMemo(()=>({id:u,forceMount:i}),[i]);return s.createElement(Q.div,{ref:xe(f,a),...n,"cmdk-group":"",role:"presentation",hidden:y?void 0:!0},r&&s.createElement("div",{ref:m,"cmdk-group-heading":"","aria-hidden":!0,id:p},r),je(t,S=>s.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?p:void 0},s.createElement(ht.Provider,{value:b},S))))}),Rr=s.forwardRef((t,a)=>{let{alwaysRender:r,...c}=t,i=s.useRef(null),n=J(u=>!u.search);return!r&&!n?null:s.createElement(Q.div,{ref:xe(i,a),...c,"cmdk-separator":"",role:"separator"})}),Pr=s.forwardRef((t,a)=>{let{onValueChange:r,...c}=t,i=t.value!=null,n=qe(),u=J(p=>p.search),f=J(p=>p.selectedItemId),m=ge();return s.useEffect(()=>{t.value!=null&&n.setState("search",t.value)},[t.value]),s.createElement(Q.input,{ref:a,...c,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":m.listId,"aria-labelledby":m.labelId,"aria-activedescendant":f,id:m.inputId,type:"text",value:i?t.value:u,onChange:p=>{i||n.setState("search",p.target.value),r==null||r(p.target.value)}})}),Er=s.forwardRef((t,a)=>{let{children:r,label:c="Suggestions",...i}=t,n=s.useRef(null),u=s.useRef(null),f=J(p=>p.selectedItemId),m=ge();return s.useEffect(()=>{if(u.current&&n.current){let p=u.current,d=n.current,y,b=new ResizeObserver(()=>{y=requestAnimationFrame(()=>{let S=p.offsetHeight;d.style.setProperty("--cmdk-list-height",S.toFixed(1)+"px")})});return b.observe(p),()=>{cancelAnimationFrame(y),b.unobserve(p)}}},[]),s.createElement(Q.div,{ref:xe(n,a),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":f,"aria-label":c,id:m.listId},je(t,p=>s.createElement("div",{ref:xe(u,m.listInnerRef),"cmdk-list-sizer":""},p)))}),Ar=s.forwardRef((t,a)=>{let{open:r,onOpenChange:c,overlayClassName:i,contentClassName:n,container:u,...f}=t;return s.createElement(Ze,{open:r,onOpenChange:c},s.createElement(rt,{container:u},s.createElement($e,{"cmdk-overlay":"",className:i}),s.createElement(De,{"aria-label":t.label,"cmdk-dialog":"",className:n},s.createElement(vt,{ref:a,...f}))))}),Ir=s.forwardRef((t,a)=>J(r=>r.filtered.count===0)?s.createElement(Q.div,{ref:a,...t,"cmdk-empty":"",role:"presentation"}):null),Fr=s.forwardRef((t,a)=>{let{progress:r,children:c,label:i="Loading...",...n}=t;return s.createElement(Q.div,{ref:a,...n,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},je(t,u=>s.createElement("div",{"aria-hidden":!0},u)))}),I=Object.assign(vt,{List:Er,Item:Sr,Input:Pr,Group:kr,Separator:Rr,Dialog:Ar,Empty:Ir,Loading:Fr});function Tr(t,a){let r=t.nextElementSibling;for(;r;){if(r.matches(a))return r;r=r.nextElementSibling}}function Mr(t,a){let r=t.previousElementSibling;for(;r;){if(r.matches(a))return r;r=r.previousElementSibling}}function xt(t){let a=s.useRef(t);return re(()=>{a.current=t}),a}var re=typeof window>"u"?s.useEffect:s.useLayoutEffect;function de(t){let a=s.useRef();return a.current===void 0&&(a.current=t()),a}function J(t){let a=qe(),r=()=>t(a.snapshot());return s.useSyncExternalStore(a.subscribe,r,r)}function gt(t,a,r,c=[]){let i=s.useRef(),n=ge();return re(()=>{var u;let f=(()=>{var p;for(let d of r){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(p=d.current.textContent)==null?void 0:p.trim():i.current}})(),m=c.map(p=>p.trim());n.value(t,f,m),(u=a.current)==null||u.setAttribute(ce,f),i.current=f}),i}var Or=()=>{let[t,a]=s.useState(),r=de(()=>new Map);return re(()=>{r.current.forEach(c=>c()),r.current=new Map},[t]),(c,i)=>{r.current.set(c,i),a({})}};function $r(t){let a=t.type;return typeof a=="function"?a(t.props):"render"in a?a.render(t.props):t}function je({asChild:t,children:a},r){return t&&s.isValidElement(a)?s.cloneElement($r(a),{ref:a.ref},r(a.props.children)):r(a)}var Dr={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const _t=s.forwardRef(({className:t,...a},r)=>e.jsx(I,{ref:r,className:A("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...a}));_t.displayName=I.displayName;const qr=s.forwardRef(({className:t,...a},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Ie,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(I.Input,{ref:r,className:A("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...a})]}));qr.displayName=I.Input.displayName;const yt=s.forwardRef(({className:t,...a},r)=>e.jsx(I.List,{ref:r,className:A("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...a}));yt.displayName=I.List.displayName;const Me=s.forwardRef((t,a)=>e.jsx(I.Empty,{ref:a,className:"py-6 text-center text-sm",...t}));Me.displayName=I.Empty.displayName;const bt=s.forwardRef(({className:t,...a},r)=>e.jsx(I.Group,{ref:r,className:A("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...a}));bt.displayName=I.Group.displayName;const Lr=s.forwardRef(({className:t,...a},r)=>e.jsx(I.Separator,{ref:r,className:A("-mx-1 h-px bg-border",t),...a}));Lr.displayName=I.Separator.displayName;const jt=s.forwardRef(({className:t,...a},r)=>e.jsx(I.Item,{ref:r,className:A("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...a}));jt.displayName=I.Item.displayName;var Le="Popover",[wt,Na]=Ht(Le,[at]),_e=at(),[Kr,Y]=wt(Le),Nt=t=>{const{__scopePopover:a,children:r,open:c,defaultOpen:i,onOpenChange:n,modal:u=!1}=t,f=_e(a),m=s.useRef(null),[p,d]=s.useState(!1),[y=!1,b]=er({prop:c,defaultProp:i,onChange:n});return e.jsx(tr,{...f,children:e.jsx(Kr,{scope:a,contentId:te(),triggerRef:m,open:y,onOpenChange:b,onOpenToggle:s.useCallback(()=>b(S=>!S),[b]),hasCustomAnchor:p,onCustomAnchorAdd:s.useCallback(()=>d(!0),[]),onCustomAnchorRemove:s.useCallback(()=>d(!1),[]),modal:u,children:r})})};Nt.displayName=Le;var Ct="PopoverAnchor",zr=s.forwardRef((t,a)=>{const{__scopePopover:r,...c}=t,i=Y(Ct,r),n=_e(r),{onCustomAnchorAdd:u,onCustomAnchorRemove:f}=i;return s.useEffect(()=>(u(),()=>f()),[u,f]),e.jsx(st,{...n,...c,ref:a})});zr.displayName=Ct;var St="PopoverTrigger",kt=s.forwardRef((t,a)=>{const{__scopePopover:r,...c}=t,i=Y(St,r),n=_e(r),u=nt(a,i.triggerRef),f=e.jsx(Q.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":It(i.open),...c,ref:u,onClick:ve(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?f:e.jsx(st,{asChild:!0,...n,children:f})});kt.displayName=St;var Ke="PopoverPortal",[Vr,Br]=wt(Ke,{forceMount:void 0}),Rt=t=>{const{__scopePopover:a,forceMount:r,children:c,container:i}=t,n=Y(Ke,a);return e.jsx(Vr,{scope:a,forceMount:r,children:e.jsx(ot,{present:r||n.open,children:e.jsx(rr,{asChild:!0,container:i,children:c})})})};Rt.displayName=Ke;var ue="PopoverContent",Pt=s.forwardRef((t,a)=>{const r=Br(ue,t.__scopePopover),{forceMount:c=r.forceMount,...i}=t,n=Y(ue,t.__scopePopover);return e.jsx(ot,{present:c||n.open,children:n.modal?e.jsx(Hr,{...i,ref:a}):e.jsx(Ur,{...i,ref:a})})});Pt.displayName=ue;var Qr=ar("PopoverContent.RemoveScroll"),Hr=s.forwardRef((t,a)=>{const r=Y(ue,t.__scopePopover),c=s.useRef(null),i=nt(a,c),n=s.useRef(!1);return s.useEffect(()=>{const u=c.current;if(u)return Ut(u)},[]),e.jsx(Gt,{as:Qr,allowPinchZoom:!0,children:e.jsx(Et,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,u=>{var f;u.preventDefault(),n.current||(f=r.triggerRef.current)==null||f.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,u=>{const f=u.detail.originalEvent,m=f.button===0&&f.ctrlKey===!0,p=f.button===2||m;n.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:ve(t.onFocusOutside,u=>u.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ur=s.forwardRef((t,a)=>{const r=Y(ue,t.__scopePopover),c=s.useRef(!1),i=s.useRef(!1);return e.jsx(Et,{...t,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var u,f;(u=t.onCloseAutoFocus)==null||u.call(t,n),n.defaultPrevented||(c.current||(f=r.triggerRef.current)==null||f.focus(),n.preventDefault()),c.current=!1,i.current=!1},onInteractOutside:n=>{var m,p;(m=t.onInteractOutside)==null||m.call(t,n),n.defaultPrevented||(c.current=!0,n.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const u=n.target;((p=r.triggerRef.current)==null?void 0:p.contains(u))&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&i.current&&n.preventDefault()}})}),Et=s.forwardRef((t,a)=>{const{__scopePopover:r,trapFocus:c,onOpenAutoFocus:i,onCloseAutoFocus:n,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:p,onInteractOutside:d,...y}=t,b=Y(ue,r),S=_e(r);return Wt(),e.jsx(Xt,{asChild:!0,loop:!0,trapped:c,onMountAutoFocus:i,onUnmountAutoFocus:n,children:e.jsx(Jt,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:d,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:p,onDismiss:()=>b.onOpenChange(!1),children:e.jsx(Yt,{"data-state":It(b.open),role:"dialog",id:b.contentId,...S,...y,ref:a,style:{...y.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),At="PopoverClose",Gr=s.forwardRef((t,a)=>{const{__scopePopover:r,...c}=t,i=Y(At,r);return e.jsx(Q.button,{type:"button",...c,ref:a,onClick:ve(t.onClick,()=>i.onOpenChange(!1))})});Gr.displayName=At;var Wr="PopoverArrow",Xr=s.forwardRef((t,a)=>{const{__scopePopover:r,...c}=t,i=_e(r);return e.jsx(Zt,{...i,...c,ref:a})});Xr.displayName=Wr;function It(t){return t?"open":"closed"}var Jr=Nt,Yr=kt,Zr=Rt,Ft=Pt;const ea=Jr,ta=Yr,Tt=s.forwardRef(({className:t,align:a="center",sideOffset:r=4,...c},i)=>e.jsx(Zr,{children:e.jsx(Ft,{ref:i,align:a,sideOffset:r,className:A("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...c})}));Tt.displayName=Ft.displayName;function ra({value:t,onChange:a,onSelect:r,cantonCode:c,placeholder:i="Rechercher une ville...",disabled:n=!1,className:u,error:f=!1}){const[m,p]=s.useState(!1),[d,y]=s.useState(t),b=s.useRef(null),[S,k]=s.useState(null),{getCityName:D}=Je();s.useEffect(()=>{y(t)},[t]);const{data:C=[],isLoading:V}=fe({queryKey:["/locations/cities/autocomplete",d,c],queryFn:async()=>{if(!d||d.trim().length<1)return[];const j=new URLSearchParams({query:d});return c&&j.append("canton_code",c),he("GET",`/locations/cities/autocomplete?${j.toString()}`)},enabled:d.trim().length>=1&&m,staleTime:1e3*60}),H=j=>{const F=j.target.value;y(F),a(F),p(!0),k(null)},Z=j=>{k(j),y(D(j.name)),a(j.name),r(j),p(!1)},R=()=>{setTimeout(()=>{p(!1)},200)},q=()=>{d.trim().length>=1&&p(!0)},N=S!==null||d&&C.some(j=>D(j.name)===d||j.name===d)||!d||d.trim().length===0;return e.jsxs("div",{className:A("relative",u),children:[e.jsxs(ea,{open:m,onOpenChange:p,children:[e.jsx(ta,{asChild:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{ref:b,value:d,onChange:H,onFocus:q,onBlur:R,placeholder:i,disabled:n,className:A(f||!N&&d.trim().length>0?"border-destructive":"")}),e.jsx(ir,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"})]})}),e.jsx(Tt,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:e.jsx(_t,{children:e.jsx(yt,{children:V?e.jsx(Me,{children:"Recherche en cours..."}):C.length===0?e.jsx(Me,{children:d.trim().length<1?"Tapez au moins 1 caractère":"Aucune ville trouvée"}):e.jsx(bt,{children:C.map(j=>e.jsxs(jt,{value:j.name,onSelect:()=>Z(j),className:"cursor-pointer",children:[e.jsx(nr,{className:A("mr-2 h-4 w-4",(S==null?void 0:S.id)===j.id?"opacity-100":"opacity-0")}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:D(j.name)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[j.postal_code," • ",j.canton_name||j.canton_code]})]})]},j.id))})})})})]}),!N&&d.trim().length>0&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:"Veuillez sélectionner une ville dans la liste"})]})}function Ca(){var w;const t=Mt(),a=new URLSearchParams(t),[,r]=Ot(),{isAuthenticated:c,isStudent:i}=Dt(),{t:n,getCantonName:u,getCityName:f}=Je(),[m,p]=s.useState(a.get("canton")||"___all___"),[d,y]=s.useState(a.get("city_id")||"___all___"),[b,S]=s.useState(a.get("property_type")||"___all___"),[k,D]=s.useState([a.get("max_price")?parseInt(a.get("max_price")):5e3]),[C,V]=s.useState(a.get("min_rooms")||"___all___"),[H,Z]=s.useState(a.get("search")||""),[R,q]=s.useState(a.get("search")||""),N=s.useRef(null);s.useEffect(()=>(N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{q(H)},100),()=>{N.current&&clearTimeout(N.current)}),[H]);const j=s.useRef(!0);s.useEffect(()=>{if(j.current){j.current=!1;return}const l=setTimeout(()=>{const h={};m&&m!=="___all___"&&(h.canton=m),d&&d!=="___all___"&&(h.city_id=d),b&&b!=="___all___"&&(h.property_type=b),k[0]<5e3&&(h.max_price=k[0].toString()),C&&C!=="___all___"&&(h.min_rooms=C),R.trim()&&(h.search=R.trim());const _=new URLSearchParams(h).toString(),P=_?`/properties?${_}`:"/properties",M=_?`?${_}`:"";(t||"")!==M&&r(P)},300);return()=>clearTimeout(l)},[m,d,b,k,C,R,r,t]);const{data:F}=fe({queryKey:["/locations/cantons"],queryFn:async()=>he("GET","/locations/cantons"),staleTime:1e3*60*60,gcTime:1e3*60*60*24}),{data:U}=fe({queryKey:[`/locations/cities/${m}`],enabled:!!m&&m!=="___all___",queryFn:async()=>{if(!m||m==="___all___")throw new Error("Canton required");return he("GET",`/locations/cities?canton=${m}`)},staleTime:1e3*60*60,gcTime:1e3*60*60*24}),G=s.useMemo(()=>{const l={};m&&m!=="___all___"&&(l.canton=m),d&&d!=="___all___"&&(l.city_id=d),b&&b!=="___all___"&&(l.property_type=b),k[0]<5e3&&(l.max_price=k[0].toString()),C&&C!=="___all___"&&(l.min_rooms=C),R.trim()&&(l.search=R.trim());const h=new URLSearchParams(l).toString();return h?`?${h}`:""},[m,d,b,k,C,R]),{data:L,isLoading:ae,error:se}=fe({queryKey:["/properties",G],enabled:!G.includes("create"),queryFn:async()=>{const l=Ve(),h={};l&&(h.Authorization=`Bearer ${l}`);const P=we().replace(/\/+$/,""),M=`/properties${G}`.replace(/^\/+/,""),E=`${P}/${M}`;if(E.includes("/properties/create")||E.includes("/properties/edit"))throw new Error(`Invalid API endpoint: ${E}`);const z=await fetch(E,{headers:h});if(!z.ok){const W=await z.json().catch(()=>({error:z.statusText}));throw new Error(W.error||W.message||z.statusText)}return z.json()},staleTime:1e3*60*3,gcTime:1e3*60*15}),{data:K,error:ne}=fe({queryKey:["/favorites"],enabled:c&&i,retry:!1,queryFn:async()=>{const l=Ve();if(!l)throw new Error("No authentication token");const h={Authorization:`Bearer ${l}`},M=`${we().replace(/\/+$/,"")}/favorites`,E=await fetch(M,{headers:h});if(!E.ok){const W=await E.json().catch(()=>({error:E.statusText}));throw new Error(W.error||W.message||E.statusText)}const z=await E.json();return Array.isArray(z)?z:[]},staleTime:1e3*60*10,gcTime:1e3*60*30}),ee=s.useMemo(()=>!K||!Array.isArray(K)?new Set:new Set(K.map(l=>l.id)),[K]),oe=ze({mutationFn:async l=>he("POST","/favorites",{property_id:l}),onMutate:async l=>{await $.cancelQueries({queryKey:["/favorites"]});const h=$.getQueryData(["/favorites"]);if(h){const _=$.getQueryCache();let P;for(const M of _.getAll())if(M.queryKey[0]==="/properties"&&Array.isArray(M.state.data)&&(P=M.state.data.find(E=>E.id===l),P))break;!P&&L&&(P=L.find(M=>M.id===l)),P&&$.setQueryData(["/favorites"],[...h,P])}return{previousFavorites:h}},onError:(l,h,_)=>{_!=null&&_.previousFavorites&&$.setQueryData(["/favorites"],_.previousFavorites)},onSettled:()=>{$.invalidateQueries({queryKey:["/favorites"]})}}),me=ze({mutationFn:async l=>he("DELETE",`/favorites/${l}`),onMutate:async l=>{await $.cancelQueries({queryKey:["/favorites"]});const h=$.getQueryData(["/favorites"]);return h&&$.setQueryData(["/favorites"],h.filter(_=>_.id!==l)),{previousFavorites:h}},onError:(l,h,_)=>{_!=null&&_.previousFavorites&&$.setQueryData(["/favorites"],_.previousFavorites)},onSettled:()=>{$.invalidateQueries({queryKey:["/favorites"]})}}),ye=s.useCallback(l=>{if(!c||!i){r("/login?redirect=/properties");return}ee.has(l)?me.mutate(l):oe.mutate(l)},[c,i,ee,oe,me,r]),T=s.useMemo(()=>{if(!L)return[];if(!R.trim())return L;const l=R.toLowerCase().trim();return l.length===0?L:L.filter(h=>{var E,z,W;const _=((E=h.title)==null?void 0:E.toLowerCase())||"",P=((z=h.city_name)==null?void 0:z.toLowerCase())||"",M=((W=h.address)==null?void 0:W.toLowerCase())||"";return _.includes(l)||P.includes(l)||M.includes(l)})},[L,R]),le=s.useCallback(l=>{p(l),y("___all___")},[]),o=s.useCallback(()=>{p("___all___"),y("___all___"),S("___all___"),D([5e3]),V("___all___")},[]),x=s.useMemo(()=>{var l;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:n("properties.canton")}),e.jsxs(Ne,{value:m,onValueChange:le,children:[e.jsx(Ce,{"data-testid":"select-canton",children:e.jsx(Se,{placeholder:n("properties.canton.all")})}),e.jsxs(ke,{children:[e.jsx(O,{value:"___all___",children:n("properties.canton.all")}),F==null?void 0:F.map(h=>e.jsx(O,{value:h.code,children:u(h)},h.code))]})]})]}),m&&m!=="___all___"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:n("properties.city")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ra,{value:d!=="___all___"&&d&&U&&((l=U.find(h=>h.id.toString()===d))==null?void 0:l.name)||"",onChange:h=>{h||y("___all___")},onSelect:h=>{y(h.id.toString())},cantonCode:m!=="___all___"?m:void 0,placeholder:n("properties.city.all")}),d!=="___all___"&&e.jsx(ie,{variant:"outline",size:"sm",className:"w-full",onClick:()=>y("___all___"),children:n("properties.city.all")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:n("properties.type")}),e.jsxs(Ne,{value:b,onValueChange:S,children:[e.jsx(Ce,{"data-testid":"select-type",children:e.jsx(Se,{placeholder:n("properties.type.all")})}),e.jsxs(ke,{children:[e.jsx(O,{value:"___all___",children:n("properties.type.all")}),e.jsx(O,{value:"apartment",children:"Apartment"}),e.jsx(O,{value:"house",children:"House"}),e.jsx(O,{value:"studio",children:"Studio"}),e.jsx(O,{value:"room",children:"Room"}),e.jsx(O,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:k[0]>=5e3?"5000+/mois":`CHF ${k[0].toLocaleString()}/mois`}),e.jsx(Lt,{value:k,onValueChange:D,max:5e3,min:200,step:100,"data-testid":"slider-price",className:"cursor-grab active:cursor-grabbing"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:n("properties.rooms.min")}),e.jsxs(Ne,{value:C,onValueChange:V,children:[e.jsx(Ce,{"data-testid":"select-rooms",children:e.jsx(Se,{placeholder:n("properties.rooms.any")})}),e.jsxs(ke,{children:[e.jsx(O,{value:"___all___",children:n("properties.rooms.any")}),e.jsx(O,{value:"1",children:"1+"}),e.jsx(O,{value:"2",children:"2+"}),e.jsx(O,{value:"3",children:"3+"}),e.jsx(O,{value:"4",children:"4+"})]})]})]}),e.jsx(ie,{variant:"outline",className:"w-full",onClick:o,"data-testid":"button-clear-filters",children:n("properties.clear")})]})},[m,d,b,k,C,F,U,le,o,n,u,f]),g=s.useMemo(()=>{let l=0;return m&&m!=="___all___"&&l++,d&&d!=="___all___"&&l++,b&&b!=="___all___"&&l++,k[0]<5e3&&l++,C&&C!=="___all___"&&l++,R.trim()&&l++,l},[m,d,b,k,C,R]),v=s.useMemo(()=>{if(!T||T.length===0)return 0;const l=T.reduce((h,_)=>h+(_.price||0),0);return Math.round(l/T.length)},[T]);return e.jsx(qt,{children:e.jsxs("div",{className:"container mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2 flex items-center gap-3","data-testid":"text-page-title",children:[e.jsx(sr,{className:"h-6 w-6 sm:h-7 sm:w-7 text-primary"}),n("properties.title")]}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:ae?e.jsx("span",{className:"flex items-center gap-2",children:e.jsx("span",{className:"animate-pulse",children:"Chargement..."})}):T.length===1?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(or,{className:"h-4 w-4 text-primary"}),n("properties.subtitle.singular",{count:T.length})]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(lr,{className:"h-4 w-4 text-primary"}),n("properties.subtitle.plural",{count:T.length}),v>0&&e.jsxs("span",{className:"ml-2 text-primary font-semibold",children:["• Prix moyen: CHF ",v.toLocaleString(),"/mois"]})]})})]})}),g>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[e.jsxs(B,{variant:"secondary",className:"gap-1",children:[e.jsx(cr,{className:"h-3 w-3"}),g," filtre",g>1?"s":""," actif",g>1?"s":""]}),m&&m!=="___all___"&&F&&e.jsxs(B,{variant:"outline",className:"gap-1",children:[u(F.find(l=>l.code===m)||{code:m,name_fr:m,name_de:m}),e.jsx("button",{onClick:()=>le("___all___"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(X,{className:"h-3 w-3"})})]}),d&&d!=="___all___"&&U&&e.jsxs(B,{variant:"outline",className:"gap-1",children:[f(((w=U.find(l=>l.id.toString()===d))==null?void 0:w.name)||""),e.jsx("button",{onClick:()=>y("___all___"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(X,{className:"h-3 w-3"})})]}),b&&b!=="___all___"&&e.jsxs(B,{variant:"outline",className:"gap-1",children:[b,e.jsx("button",{onClick:()=>S("___all___"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(X,{className:"h-3 w-3"})})]}),k[0]<5e3&&e.jsxs(B,{variant:"outline",className:"gap-1",children:[k[0].toLocaleString(),"/mois",e.jsx("button",{onClick:()=>D([5e3]),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(X,{className:"h-3 w-3"})})]}),k[0]>=5e3&&e.jsx(B,{variant:"outline",children:"5000+/mois"}),C&&C!=="___all___"&&e.jsxs(B,{variant:"outline",className:"gap-1",children:[C,"+ pièces",e.jsx("button",{onClick:()=>V("___all___"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(X,{className:"h-3 w-3"})})]}),R.trim()&&e.jsxs(B,{variant:"outline",className:"gap-1",children:['"',R,'"',e.jsx("button",{onClick:()=>Z(""),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(X,{className:"h-3 w-3"})})]}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:o,className:"h-6 text-xs",children:"Tout effacer"})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6",children:[e.jsx("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:e.jsxs(Re,{className:"sticky top-20 border-2",children:[e.jsx(zt,{className:"bg-muted/50",children:e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-primary"}),n("properties.filters"),g>0&&e.jsx(B,{variant:"default",className:"ml-auto",children:g})]})}),e.jsx(Be,{className:"pt-6",children:x})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx(Ie,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Ye,{placeholder:n("properties.search.placeholder"),value:H,onChange:l=>Z(l.target.value),className:"pl-9 sm:pl-10 h-9 sm:h-10 text-sm sm:text-base","data-testid":"input-search"})]}),e.jsxs(dr,{children:[e.jsx(ur,{asChild:!0,children:e.jsxs(ie,{variant:"outline",className:"lg:hidden h-9 sm:h-10 active:scale-95 transition-transform duration-100 relative",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:n("properties.filters")}),e.jsx("span",{className:"xs:hidden",children:"Filters"}),g>0&&e.jsx(B,{variant:"default",className:"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center text-xs",children:g})]})}),e.jsxs(it,{side:"left",children:[e.jsx(ct,{children:e.jsx(dt,{children:n("properties.filters")})}),e.jsx("div",{className:"mt-6",children:x})]})]})]}),se?e.jsx(Qe,{variant:"destructive",className:"mb-4",children:e.jsx(He,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"Erreur de chargement"}),e.jsx("p",{className:"text-sm",children:se instanceof Error?se.message:"Erreur inconnue"}),e.jsxs("p",{className:"text-xs mt-2 text-muted-foreground",children:["URL: ",we(),"/properties",G]})]}),e.jsx(ie,{variant:"outline",size:"sm",onClick:()=>$.invalidateQueries({queryKey:["/properties"]}),children:"Réessayer"})]})})}):ae?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(l=>e.jsxs(Re,{children:[e.jsx(be,{className:"aspect-[4/3] w-full"}),e.jsxs(Be,{className:"p-4 space-y-3",children:[e.jsx(be,{className:"h-5 w-3/4"}),e.jsx(be,{className:"h-4 w-1/2"}),e.jsx(be,{className:"h-4 w-full"})]})]},l))}):T.length===0?e.jsx(Re,{className:"p-6 sm:p-8 md:p-12 text-center border-dashed",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center",children:e.jsx(Ie,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:n("properties.empty")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n("properties.empty.subtitle")}),g>0&&e.jsx(Qe,{className:"max-w-md mx-auto mb-4",children:e.jsx(He,{className:"text-center",children:"Aucune propriété ne correspond à vos critères. Essayez de modifier vos filtres."})}),e.jsxs(ie,{onClick:o,variant:"outline",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Réinitialiser les filtres"]})]})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5 md:gap-6",children:T.map(l=>e.jsx(Kt,{property:l,isFavorited:c&&i?ee.has(l.id):!1,onFavoriteToggle:ye},l.id))})]})]})]})})}export{Ca as default};
