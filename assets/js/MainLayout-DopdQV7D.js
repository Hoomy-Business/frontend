import{j as e}from"./query-vendor-yCE0qXS-.js";import{r as d,u as ae,L as o}from"./react-vendor-CvpuY9Ms.js";import{h as g,i as m,u as M,B as f,v as se,w as te,a as re}from"./index-DjvxG9Nq.js";import{L as $}from"./Logo-B_O9zLZT.js";import{ag as ne,ah as ie,ai as R,aj as I,ak as oe,al as _,am as z,an as E,ao as U,ap as D,aq as W,ar as B,n as de,l as y,X as le,Y as N}from"./ui-vendor-3oCJfrha.js";import{C as ce,a as me,U as C}from"./user-DRx2jp6U.js";import{B as v}from"./building-2-CEFxqaOP.js";const he=g("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const ue=g("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const fe=g("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const pe=g("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const xe=g("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const S=g("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),F=ne,q=ie,ge=d.forwardRef(({className:t,inset:a,children:s,...r},l)=>e.jsxs(R,{ref:l,className:m("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",t),...r,children:[s,e.jsx(he,{className:"ml-auto"})]}));ge.displayName=R.displayName;const je=d.forwardRef(({className:t,...a},s)=>e.jsx(I,{ref:s,className:m("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...a}));je.displayName=I.displayName;const w=d.forwardRef(({className:t,sideOffset:a=4,...s},r)=>e.jsx(oe,{children:e.jsx(_,{ref:r,sideOffset:a,className:m("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s})}));w.displayName=_.displayName;const x=d.forwardRef(({className:t,inset:a,...s},r)=>e.jsx(z,{ref:r,className:m("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",t),...s}));x.displayName=z.displayName;const be=d.forwardRef(({className:t,children:a,checked:s,...r},l)=>e.jsxs(E,{ref:l,className:m("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(U,{children:e.jsx(ce,{className:"h-4 w-4"})})}),a]}));be.displayName=E.displayName;const ve=d.forwardRef(({className:t,children:a,...s},r)=>e.jsxs(D,{ref:r,className:m("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(U,{children:e.jsx(me,{className:"h-2 w-2 fill-current"})})}),a]}));ve.displayName=D.displayName;const Ne=d.forwardRef(({className:t,inset:a,...s},r)=>e.jsx(W,{ref:r,className:m("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",t),...s}));Ne.displayName=W.displayName;const j=d.forwardRef(({className:t,...a},s)=>e.jsx(B,{ref:s,className:m("-mx-1 my-1 h-px bg-muted",t),...a}));j.displayName=B.displayName;var k="Avatar",[ye,We]=de(k),[we,P]=ye(k),T=d.forwardRef((t,a)=>{const{__scopeAvatar:s,...r}=t,[l,i]=d.useState("idle");return e.jsx(we,{scope:s,imageLoadingStatus:l,onImageLoadingStatusChange:i,children:e.jsx(y.span,{...r,ref:a})})});T.displayName=k;var H="AvatarImage",V=d.forwardRef((t,a)=>{const{__scopeAvatar:s,src:r,onLoadingStatusChange:l=()=>{},...i}=t,c=P(H,s),n=ke(r,i),h=le(u=>{l(u),c.onImageLoadingStatusChange(u)});return N(()=>{n!=="idle"&&h(n)},[n,h]),n==="loaded"?e.jsx(y.img,{...i,ref:a,src:r}):null});V.displayName=H;var G="AvatarFallback",O=d.forwardRef((t,a)=>{const{__scopeAvatar:s,delayMs:r,...l}=t,i=P(G,s),[c,n]=d.useState(r===void 0);return d.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>n(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&i.imageLoadingStatus!=="loaded"?e.jsx(y.span,{...l,ref:a}):null});O.displayName=G;function L(t,a){return t?a?(t.src!==a&&(t.src=a),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ke(t,{referrerPolicy:a,crossOrigin:s}){const r=Ce(),l=d.useRef(null),i=r?(l.current||(l.current=new window.Image),l.current):null,[c,n]=d.useState(()=>L(i,t));return N(()=>{n(L(i,t))},[i,t]),N(()=>{const h=ee=>()=>{n(ee)};if(!i)return;const u=h("loaded"),p=h("error");return i.addEventListener("load",u),i.addEventListener("error",p),a&&(i.referrerPolicy=a),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",u),i.removeEventListener("error",p)}},[i,s,a]),c}function $e(){return()=>{}}function Ce(){return d.useSyncExternalStore($e,()=>!0,()=>!1)}var Y=T,K=V,X=O;const Z=d.forwardRef(({className:t,...a},s)=>e.jsx(Y,{ref:s,className:m(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...a}));Z.displayName=Y.displayName;const J=d.forwardRef(({className:t,...a},s)=>e.jsx(K,{ref:s,className:m("aspect-square h-full w-full",t),...a}));J.displayName=K.displayName;const Q=d.forwardRef(({className:t,...a},s)=>e.jsx(X,{ref:s,className:m("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...a}));Q.displayName=X.displayName;function Se(){const{language:t,setLanguage:a}=M();return e.jsxs(F,{children:[e.jsx(q,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",className:"relative","aria-label":"Change language",children:e.jsx(ue,{className:"h-5 w-5"})})}),e.jsx(w,{align:"end",className:"w-48",children:se.map(s=>e.jsxs(x,{onClick:()=>a(s.code),className:`cursor-pointer ${t===s.code?"bg-accent":""}`,children:[e.jsx("span",{className:"mr-2 text-lg",children:s.flag}),e.jsx("span",{children:s.name}),t===s.code&&e.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"✓"})]},s.code))})]})}function Le(t){if(!t||t.trim()==="")return'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%23e5e7eb" width="400" height="300"/%3E%3Ctext fill="%239ca3af" x="50%25" y="50%25" text-anchor="middle" dy=".3em" font-family="system-ui" font-size="16"%3EImage non disponible%3C/text%3E%3C/svg%3E';const a=t.trim();if(a.startsWith("/placeholder-")||a.startsWith("data:"))return a;const s=te();if(a.startsWith("http://")||a.startsWith("https://")){if(a.includes("localhost:3000")||a.includes("backend.hoomy.site")||a.includes("/api/image/")||a.includes("/api/kyc/image/")||/^\d+\.\d+\.\d+\.\d+:\d+/.test(a)){const n=a.match(/\/api\/kyc\/image\/([^\/\?]+)/);if(n)return`${s.replace(/\/+$/,"")}/api/kyc/image/${n[1]}`;const h=a.match(/\/api\/image\/([^\/\?]+)/);if(h)return`${s.replace(/\/+$/,"")}/api/image/${h[1]}`;const u=a.match(/\/([^\/\?]+\.(jpg|jpeg|png|gif|webp))$/i);if(u){const p=s.replace(/\/+$/,"");return u[1].startsWith("kyc-")?`${p}/api/kyc/image/${u[1]}`:`${p}/api/image/${u[1]}`}}return a}if(a.startsWith("/api/kyc/image/"))return`${s.replace(/\/+$/,"")}${a}`;if(a.startsWith("/api/image/"))return`${s.replace(/\/+$/,"")}${a}`;let r=a;if(a.includes("/")&&(r=a.split("/").pop()||a),r=r.split("?")[0].split("#")[0],r&&/\.(jpg|jpeg|png|gif|webp)$/i.test(r)){const c=s.replace(/\/+$/,"");return r.startsWith("kyc-")?`${c}/api/kyc/image/${r}`:`${c}/api/image/${r}`}const l=a.match(/\/api\/kyc\/image\/([^\/\?]+)/);if(l)return`${s.replace(/\/+$/,"")}/api/kyc/image/${l[1]}`;const i=a.match(/\/api\/image\/([^\/\?]+)/);return i?`${s.replace(/\/+$/,"")}/api/image/${i[1]}`:r&&/^[a-zA-Z0-9_-]+$/.test(r)?`${s.replace(/\/+$/,"")}/api/image/${r}`:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%23e5e7eb" width="400" height="300"/%3E%3Ctext fill="%239ca3af" x="50%25" y="50%25" text-anchor="middle" dy=".3em" font-family="system-ui" font-size="16"%3EImage non disponible%3C/text%3E%3C/svg%3E'}function b(t){return t?!!t.deleted_at:!1}function Ae(t){if(!t)return"Utilisateur inconnu";if(b(t))return`deleted_user_${t.id||""}`;const a=t.first_name||"",s=t.last_name||"";return`${a} ${s}`.trim()||"Utilisateur"}function A(t){return!t||b(t)?null:t.profile_picture}function Me(t){if(!t)return"U";if(b(t))return"DU";const a=t.first_name||"",s=t.last_name||"";return a&&s?`${a[0]}${s[0]}`.toUpperCase():a?a[0].toUpperCase():s?s[0].toUpperCase():"U"}function Be({children:t}){const[a]=ae(),{user:s,logout:r,isAuthenticated:l,isStudent:i,isOwner:c}=re(),{t:n}=M();return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 transition-all duration-200",children:e.jsx("div",{className:"container mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:e.jsxs("div",{className:"flex h-14 sm:h-16 items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(o,{href:"/","data-testid":"link-home",children:e.jsx("div",{className:"hover-elevate px-1.5 sm:px-2 py-1 rounded-md cursor-pointer active:scale-95 transition-transform duration-100",children:e.jsx($,{})})}),e.jsx("nav",{className:"hidden md:flex gap-4 lg:gap-6",children:e.jsx(o,{href:"/properties","data-testid":"link-properties",children:e.jsxs(f,{variant:"ghost",className:a==="/properties"?"bg-accent":"","data-testid":"button-browse",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),n("nav.properties")]})})})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 md:gap-3",children:[e.jsx(Se,{}),l&&s?e.jsxs(e.Fragment,{children:[i&&e.jsx(o,{href:"/dashboard/student","data-testid":"link-dashboard-student",children:e.jsxs(f,{variant:"ghost",size:"sm",className:`${a.startsWith("/dashboard/student")?"bg-accent":""} hidden sm:flex active:scale-95 transition-transform duration-100`,children:[e.jsx(C,{className:"h-4 w-4 mr-1.5 sm:mr-2"}),e.jsx("span",{className:"hidden lg:inline",children:n("nav.dashboard")})]})}),c&&e.jsx(o,{href:"/dashboard/owner","data-testid":"link-dashboard-owner",children:e.jsxs(f,{variant:"ghost",size:"sm",className:`${a.startsWith("/dashboard/owner")?"bg-accent":""} hidden sm:flex active:scale-95 transition-transform duration-100`,children:[e.jsx(v,{className:"h-4 w-4 mr-1.5 sm:mr-2"}),e.jsx("span",{className:"hidden lg:inline",children:n("nav.dashboard")})]})}),s.role==="admin"&&e.jsx(o,{href:"/admin/dashboard","data-testid":"link-dashboard-admin",children:e.jsxs(f,{variant:"ghost",size:"sm",className:`${a.startsWith("/admin/dashboard")?"bg-accent":""} hidden sm:flex active:scale-95 transition-transform duration-100 border-primary/20`,children:[e.jsx(S,{className:"h-4 w-4 mr-1.5 sm:mr-2"}),e.jsx("span",{className:"hidden lg:inline",children:"Admin"})]})}),e.jsx(o,{href:"/messages","data-testid":"link-messages",children:e.jsx(f,{variant:"ghost",size:"icon",className:`${a==="/messages"?"bg-accent":""} h-9 w-9 sm:h-10 sm:w-10 active:scale-95 transition-transform duration-100`,children:e.jsx(pe,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),e.jsxs(F,{children:[e.jsx(q,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",className:"rounded-full","data-testid":"button-user-menu",children:e.jsxs(Z,{className:"h-8 w-8",children:[e.jsx(J,{src:A(s)?Le(A(s)):void 0}),e.jsx(Q,{className:"bg-primary text-primary-foreground",children:Me(s)})]})})}),e.jsxs(w,{align:"end",className:"w-56",children:[e.jsxs("div",{className:"px-2 py-2",children:[e.jsx("p",{className:"text-sm font-medium",children:Ae(s)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b(s)?"Compte supprimé":s.email})]}),e.jsx(j,{}),i&&e.jsx(o,{href:"/dashboard/student","data-testid":"link-dashboard-student-mobile",children:e.jsxs(x,{className:"cursor-pointer",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),n("nav.dashboard")]})}),c&&e.jsxs(e.Fragment,{children:[e.jsx(o,{href:"/dashboard/owner","data-testid":"link-dashboard-owner-mobile",children:e.jsxs(x,{className:"cursor-pointer",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),n("nav.dashboard")]})}),e.jsx(o,{href:"/properties/create","data-testid":"link-create-property",children:e.jsxs(x,{className:"cursor-pointer",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),n("dashboard.properties.add")]})}),e.jsx(j,{})]}),s.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{href:"/admin/dashboard","data-testid":"link-dashboard-admin-mobile",children:e.jsxs(x,{className:"cursor-pointer",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),n("nav.admin")]})}),e.jsx(j,{})]}),e.jsxs(x,{onClick:r,className:"cursor-pointer text-destructive focus:text-destructive","data-testid":"button-logout",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),n("nav.logout")]})]})]})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{href:"/login","data-testid":"link-login",children:e.jsx(f,{variant:"ghost",children:n("nav.login")})}),e.jsx(o,{href:"/register","data-testid":"link-register",children:e.jsx(f,{variant:"default",children:n("nav.register")})})]})]})]})})}),e.jsx("main",{className:"flex-1",children:t}),e.jsx("footer",{className:"border-t py-12 mt-16",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"mb-4",children:e.jsx($,{iconClassName:"h-6 w-6",textClassName:"text-xl"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n("footer.tagline")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:n("footer.students.title")}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:e.jsx(o,{href:"/properties",className:"hover:text-foreground",children:n("footer.students.browse")})}),e.jsx("li",{children:e.jsx(o,{href:"/register?role=student",className:"hover:text-foreground",children:n("footer.students.signup")})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:n("footer.landlords.title")}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:e.jsx(o,{href:"/register?role=owner",className:"hover:text-foreground",children:n("footer.landlords.list_property")})}),e.jsx("li",{children:e.jsx(o,{href:"/login",className:"hover:text-foreground",children:n("footer.landlords.login")})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:n("footer.company.title")}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:e.jsx(o,{href:"/about",className:"hover:text-foreground",children:n("footer.company.about")})}),e.jsx("li",{children:e.jsx(o,{href:"/cgu#contact",className:"hover:text-foreground",children:n("footer.company.contact")})}),e.jsx("li",{children:e.jsx(o,{href:"/cgu",className:"hover:text-foreground",children:n("footer.company.terms")})}),e.jsx("li",{children:e.jsx(o,{href:"/privacy",className:"hover:text-foreground",children:n("footer.company.privacy")})})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t text-center text-sm text-muted-foreground",children:e.jsx("p",{children:n("footer.copyright",{year:new Date().getFullYear()})})})]})})]})}export{Z as A,he as C,F as D,Be as M,xe as S,S as a,J as b,A as c,Q as d,pe as e,Ae as f,Me as g,q as h,w as i,Ne as j,j as k,x as l,Le as n};
