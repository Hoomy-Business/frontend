import{u as T,b as le,j as e}from"./query-vendor-yCE0qXS-.js";import{u as ie,r as L,L as z}from"./react-vendor-CvpuY9Ms.js";import{u as ce,F as de,a as u,b as m,c as p,d as h,e as g,f as M,t as ue,g as me}from"./schema-O3EbQSGn.js";import{M as Y,C as pe}from"./MainLayout-BNeTwvB_.js";import{h as he,a as ge,u as xe,B as w,C as be,d as je,e as fe,f as ve,b as ye,g as we,X as Ce,m as Ne,c as I}from"./index-42cH5BrD.js";import{I as v}from"./input-BQfOhgGT.js";import{T as _e}from"./textarea-CY0erOeW.js";import{S as q,a as B,b as $,c as O,d as N}from"./select-BcylK2lL.js";import{A as X,a as J}from"./alert-DAdm-3vK.js";import{A as Se}from"./arrow-left-C-AsHpik.js";import{U as Ee}from"./upload-qSSxL3Iv.js";import"./ui-vendor-3oCJfrha.js";import"./label-67qstHpt.js";import"./Logo-Bsxlbf95.js";import"./user--iiFN26U.js";import"./building-2-DW-G4Bjl.js";const Le=he("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function Ge(){const[,Q]=ie(),{isOwner:G}=ge(),{getCantonName:Z,getCityName:ee}=xe(),[F,d]=L.useState(""),[V,_]=L.useState(!1),[l,K]=L.useState([]),[k,re]=L.useState(""),[f,C]=L.useState(0),{data:R}=T({queryKey:["/locations/cantons"],queryFn:async()=>I("GET","/locations/cantons")}),{data:U}=T({queryKey:["/locations/cities",k],enabled:!!k,queryFn:async()=>{if(!k)throw new Error("Canton required");return I("GET",`/locations/cities?canton=${k}`)}}),{data:A}=T({queryKey:["/kyc/status"],queryFn:async()=>I("GET","/kyc/status"),enabled:G}),i=ce({resolver:ue(me),defaultValues:{title:"",description:"",property_type:"apartment",address:"",city_name:"",postal_code:"",canton_code:"",price:0,charges:0,rooms:void 0,bathrooms:void 0,surface_area:void 0,available_from:""},shouldUnregister:!1,shouldFocusError:!0}),D=le({mutationFn:async r=>{var b;const t=r.image_urls||r.photos||[];if(!t||t.length===0)throw new Error("Au moins une image est requise");const s=t.filter(o=>typeof o=="string"&&o.trim().length>0).map(o=>o.trim()).filter(o=>{try{const c=new URL(o);return c.protocol==="http:"||c.protocol==="https:"}catch{return!1}});if(s.length===0)throw new Error("Aucune URL d'image valide fournie. Veuillez rÃ©essayer de tÃ©lÃ©charger les images.");const a={title:String(r.title||"").trim(),description:String(r.description||"").trim(),property_type:String(r.property_type||"apartment"),address:String(r.address||"").trim(),city_name:String(r.city_name||"").trim(),postal_code:String(r.postal_code||"").trim(),canton_code:String(r.canton_code||"").trim(),price:typeof r.price=="number"?r.price:Number(r.price)||0,image_urls:s};if(r.rooms!==void 0&&r.rooms!==null){const o=typeof r.rooms=="number"?r.rooms:Number(r.rooms);!isNaN(o)&&o>0&&(a.rooms=o)}if(r.bathrooms!==void 0&&r.bathrooms!==null){const o=typeof r.bathrooms=="number"?r.bathrooms:Number(r.bathrooms);!isNaN(o)&&o>0&&(a.bathrooms=o)}if(r.surface_area!==void 0&&r.surface_area!==null){const o=typeof r.surface_area=="number"?r.surface_area:Number(r.surface_area);!isNaN(o)&&o>0&&(a.surface_area=o)}const n=typeof r.charges=="number"?r.charges:Number(r.charges)||0;if(a.charges=n,r.available_from&&typeof r.available_from=="string"&&r.available_from.trim()!==""){const o=new Date(r.available_from),c=new Date("1900-01-01");if(!isNaN(o.getTime())&&o>=c){const S=o.getFullYear(),E=String(o.getMonth()+1).padStart(2,"0"),j=String(o.getDate()).padStart(2,"0");a.available_from=`${S}-${E}-${j}`}}if(Object.keys(a).forEach(o=>{(a[o]===null||a[o]===void 0)&&delete a[o]}),a.title,a.property_type,a.address,a.price,(b=a.image_urls)!=null&&b.length,a.image_urls,a.rooms,a.bathrooms,a.surface_area,a.available_from,Object.values(a).some(o=>typeof o=="boolean")&&console.warn("âš ï¸ ATTENTION: Le payload contient des valeurs boolÃ©ennes:",Object.entries(a).filter(([o,c])=>typeof c=="boolean")),!Array.isArray(a.image_urls))throw new Error("image_urls doit Ãªtre un tableau de strings");if(a.image_urls.some(o=>typeof o!="string"))throw new Error("Toutes les URLs d'images doivent Ãªtre des strings");try{const o=await I("POST","/properties",a);if(o&&o.id){const c=o.photos&&Array.isArray(o.photos)&&o.photos.length>0,S=o.image_urls&&Array.isArray(o.image_urls)&&o.image_urls.length>0;return c||S?(c?o.photos.length:o.image_urls.length,o):(console.warn("âš ï¸ PropriÃ©tÃ© crÃ©Ã©e mais rÃ©ponse sans images. On considÃ¨re quand mÃªme comme succÃ¨s car le serveur a pu crÃ©er les images de maniÃ¨re asynchrone."),o)}return o}catch(o){throw console.error("âŒ Erreur lors de la crÃ©ation de la propriÃ©tÃ©:",o),o}},onSuccess:r=>{r&&r.id?Q("/dashboard/owner"):(console.error("âŒ RÃ©ponse invalide du serveur:",r),d("La propriÃ©tÃ© a Ã©tÃ© crÃ©Ã©e mais la rÃ©ponse du serveur est invalide. VÃ©rifiez votre tableau de bord."),_(!0))},onError:r=>{let t=r.message||"Failed to create property";const s=t.toLowerCase();if(s.includes("property_id")&&(s.includes("boolean")||s.includes("bool")))t=`âš ï¸ Erreur lors de l'ajout des photos

La propriÃ©tÃ© a probablement Ã©tÃ© crÃ©Ã©e mais les photos n'ont pas pu Ãªtre ajoutÃ©es en raison d'une erreur cÃ´tÃ© serveur.

Cette erreur indique un problÃ¨me dans le backend lors de l'insertion des photos dans la base de donnÃ©es. La propriÃ©tÃ© existe probablement mais sans photos.

VÃ©rifiez votre tableau de bord - votre annonce est peut-Ãªtre dÃ©jÃ  visible. Si c'est le cas, vous pourrez ajouter les photos depuis la page d'Ã©dition.

Si la propriÃ©tÃ© n'apparaÃ®t pas, veuillez rÃ©essayer de crÃ©er l'annonce.`,_(!0),console.error("âŒ ERREUR BACKEND property_id:",r.message),console.error("âš ï¸  Cette erreur indique que le serveur essaie d'insÃ©rer un boolÃ©en dans la colonne property_id (bigint)"),console.error("ðŸ“‹ La propriÃ©tÃ© a probablement Ã©tÃ© crÃ©Ã©e malgrÃ© l'erreur - vÃ©rifiez le dashboard"),console.error("ðŸ”§ Cette erreur nÃ©cessite une correction cÃ´tÃ© backend dans la logique d'insertion des photos");else if(s.includes("photo")||s.includes("image")||s.includes("picture"))(s.includes("insert")||s.includes("save")||s.includes("create")||s.includes("upload"))&&(t=`âš ï¸ ProblÃ¨me avec les photos

La propriÃ©tÃ© a probablement Ã©tÃ© crÃ©Ã©e mais les photos n'ont pas pu Ãªtre ajoutÃ©es. VÃ©rifiez votre tableau de bord et ajoutez les photos depuis la page d'Ã©dition si nÃ©cessaire.

Si la propriÃ©tÃ© n'apparaÃ®t pas dans votre tableau de bord, veuillez rÃ©essayer de crÃ©er l'annonce.`,_(!0));else if(s.includes("erreur crÃ©ation annonce")||s.includes("error creating property")){const a=t.match(/(?:Erreur crÃ©ation annonce|error creating property):\s*(.+)/i);if(a&&a[1]){console.error("âŒ Erreur dÃ©taillÃ©e:",a[1]);const n=a[1].toLowerCase();(n.includes("property_id")||n.includes("photo")||n.includes("image"))&&(t=`âš ï¸ ProblÃ¨me avec les photos

La propriÃ©tÃ© a probablement Ã©tÃ© crÃ©Ã©e mais les photos n'ont pas pu Ãªtre ajoutÃ©es. VÃ©rifiez votre tableau de bord.

Si la propriÃ©tÃ© n'apparaÃ®t pas dans votre tableau de bord, veuillez rÃ©essayer de crÃ©er l'annonce.`,_(!0))}}else s.includes("out of range")||s.includes("numeric value out of range")?t="Une valeur numÃ©rique est hors limite. Veuillez vÃ©rifier vos donnÃ©es.":s.includes("network")||s.includes("timeout")||s.includes("fetch")||s.includes("failed to fetch")?(t=`âš ï¸ Erreur de connexion

Une erreur de connexion s'est produite. La propriÃ©tÃ© pourrait avoir Ã©tÃ© crÃ©Ã©e. VÃ©rifiez votre tableau de bord.

Si la propriÃ©tÃ© n'apparaÃ®t pas, veuillez rÃ©essayer.`,_(!0)):t=`Erreur lors de la crÃ©ation de l'annonce : ${t}

Veuillez vÃ©rifier vos donnÃ©es et rÃ©essayer. Si le problÃ¨me persiste, contactez le support.`;d(t)}}),P=10*1024*1024,se=(r,t=1920,s=1920,a=.85)=>new Promise((n,x)=>{const b=new FileReader;b.onload=o=>{var S;const c=new Image;c.onload=()=>{const E=document.createElement("canvas");let j=c.width,y=c.height;(j>t||y>s)&&(j>y?(y=y*t/j,j=t):(j=j*s/y,y=s)),E.width=j,E.height=y;const W=E.getContext("2d");if(!W){x(new Error("Impossible de crÃ©er le contexte canvas"));return}W.drawImage(c,0,0,j,y),E.toBlob(H=>{if(!H){x(new Error("Ã‰chec de la compression"));return}const ne=new File([H],r.name,{type:r.type,lastModified:Date.now()});n(ne)},r.type,a)},c.onerror=()=>x(new Error("Erreur lors du chargement de l'image")),c.src=(S=o.target)==null?void 0:S.result},b.onerror=()=>x(new Error("Erreur lors de la lecture du fichier")),b.readAsDataURL(r)}),te=async r=>{if(r.target.files){const t=Array.from(r.target.files);d("");try{const s=[];for(const a of t){if(!a.type.startsWith("image/")){d(`Le fichier "${a.name}" n'est pas une image valide.`);return}let n=a;if(a.size>P)try{if(n=await se(a),n.size>P){const x=(P/1048576).toFixed(0);d(`L'image "${a.name}" est trop volumineuse mÃªme aprÃ¨s compression (${(n.size/(1024*1024)).toFixed(1)} MB). La taille maximale est de ${x} MB. Veuillez utiliser une image plus petite.`);return}}catch{const b=(P/1048576).toFixed(0);d(`Impossible de compresser "${a.name}". Veuillez rÃ©duire manuellement la taille de l'image (max ${b} MB).`);return}s.push(n)}s.length>0&&K(a=>[...a,...s])}catch(s){d("Erreur lors du traitement des fichiers: "+(s instanceof Error?s.message:"Erreur inconnue"))}}},oe=r=>{K(t=>{const s=t.filter((a,n)=>n!==r);return f>=s.length&&s.length>0?C(s.length-1):s.length===0&&C(0),s})};L.useEffect(()=>{f>=l.length&&l.length>0?C(l.length-1):l.length===0&&C(0)},[l.length,f]);const ae=async r=>{if(d(""),_(!1),!r.address||!r.city_name||!r.postal_code||!r.canton_code){d("Veuillez remplir tous les champs d'adresse (rue, canton, ville, code postal)");return}if(l.length===0){d("Au moins une image est requise");return}let t=[];try{if(t=(await Ne(l)).images.map(x=>x.url),!t||t.length===0){d("Ã‰chec du tÃ©lÃ©chargement des images. Aucune URL d'image n'a Ã©tÃ© retournÃ©e. Veuillez rÃ©essayer."),console.error("âŒ Aucune URL d'image retournÃ©e aprÃ¨s l'upload");return}const n=t.filter(x=>{try{const b=new URL(x);return!(b.protocol==="http:"||b.protocol==="https:")}catch{return!0}});if(n.length>0){d("Certaines URLs d'images ne sont pas valides. Veuillez rÃ©essayer de tÃ©lÃ©charger les images."),console.error("âŒ URLs d'images invalides:",n);return}t.length}catch(a){const n=a instanceof Error?a.message:"Erreur inconnue";d("Ã‰chec du tÃ©lÃ©chargement des images: "+n),(n.includes("trop volumineux")||n.includes("File too large"))&&d("Ã‰chec du tÃ©lÃ©chargement des images: Les fichiers sont trop volumineux. La taille maximale est de 10 MB par image. Veuillez compresser ou rÃ©duire la taille de vos images avant de les uploader.");return}if(r.postal_code&&!/^\d{4}$/.test(r.postal_code)){d("Le code postal doit contenir exactement 4 chiffres");return}const s={...r,image_urls:t};D.mutate(s)};return G?e.jsx(Y,{children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(z,{href:"/dashboard/owner",children:e.jsxs(w,{variant:"ghost",className:"mb-4",children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs(be,{children:[e.jsxs(je,{children:[e.jsx(fe,{children:"Add New Property"}),e.jsx(ve,{children:"Fill in the details of your property listing"})]}),e.jsxs(ye,{children:[F&&e.jsx(X,{variant:V?"default":"destructive",className:`mb-4 ${V?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":""}`,children:e.jsx(J,{className:V?"text-yellow-800 dark:text-yellow-200":"",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-semibold",children:F.split(`

`)[0]}),F.includes(`

`)&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx("p",{children:F.split(`

`)[1]}),V&&e.jsx(z,{href:"/dashboard/owner",children:e.jsx(w,{variant:"outline",size:"sm",className:"mt-2",children:"VÃ©rifier mon tableau de bord"})})]})]})})}),A&&A.status!=="approved"&&e.jsxs(X,{className:"mb-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20",children:[e.jsx(we,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(J,{className:"text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"VÃ©rification KYC requise"}),e.jsx("br",{}),"Vous devez complÃ©ter la vÃ©rification KYC avant de pouvoir publier des annonces.",e.jsx("br",{}),e.jsx(z,{href:"/dashboard/owner?tab=profile",className:"underline font-medium mt-2 inline-block",children:"ComplÃ©ter la vÃ©rification dans votre profil"})]})]}),e.jsx(de,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(ae),className:"space-y-6",children:[e.jsx(u,{control:i.control,name:"title",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"Property Title"}),e.jsx(h,{children:e.jsx(v,{...r,placeholder:"Cozy 2-room apartment near university","data-testid":"input-title"})}),e.jsx(g,{})]})}),e.jsx(u,{control:i.control,name:"description",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"Description"}),e.jsx(h,{children:e.jsx(_e,{...r,placeholder:"Describe your property, amenities, nearby facilities...",rows:6,className:"resize-none","data-testid":"input-description"})}),e.jsx(M,{children:"Minimum 20 caractÃ¨res avec plusieurs mots sÃ©parÃ©s par des espaces"}),e.jsx(g,{})]})}),e.jsx(u,{control:i.control,name:"property_type",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"Property Type"}),e.jsxs(q,{onValueChange:r.onChange,value:r.value,children:[e.jsx(h,{children:e.jsx(B,{"data-testid":"select-type",children:e.jsx($,{})})}),e.jsxs(O,{children:[e.jsx(N,{value:"apartment",children:"Apartment"}),e.jsx(N,{value:"house",children:"House"}),e.jsx(N,{value:"studio",children:"Studio"}),e.jsx(N,{value:"room",children:"Room"}),e.jsx(N,{value:"other",children:"Other"})]})]}),e.jsx(g,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(u,{control:i.control,name:"price",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"Monthly Rent (CHF)"}),e.jsx(h,{children:e.jsx(v,{...r,type:"number",placeholder:"1500",value:r.value||"",onChange:t=>{const s=t.target.value;r.onChange(s===""?void 0:parseFloat(s)||void 0)},"data-testid":"input-price"})}),e.jsx(g,{})]})}),e.jsx(u,{control:i.control,name:"charges",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"Charges mensuelles (CHF)"}),e.jsx(h,{children:e.jsx(v,{...r,type:"number",placeholder:"200",value:r.value||0,onChange:t=>{const s=t.target.value;r.onChange(s===""?0:parseFloat(s)||0)},"data-testid":"input-charges",required:!0})}),e.jsx(M,{className:"text-xs",children:"Ã‰lectricitÃ©, eau, chauffage, etc. (obligatoire)"}),e.jsx(g,{})]})})]}),e.jsx(u,{control:i.control,name:"address",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"Street Address"}),e.jsx(h,{children:e.jsx(v,{...r,placeholder:"Entrez une adresse","data-testid":"input-address"})}),e.jsx(g,{})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(u,{control:i.control,name:"canton_code",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"Canton"}),e.jsxs(q,{onValueChange:t=>{r.onChange(t),re(t),i.setValue("city_name","")},value:r.value,children:[e.jsx(h,{children:e.jsx(B,{"data-testid":"select-canton",children:e.jsx($,{placeholder:"Select"})})}),e.jsx(O,{children:R==null?void 0:R.map(t=>e.jsx(N,{value:t.code,children:Z(t)},t.code))})]}),e.jsx(g,{})]})}),e.jsx(u,{control:i.control,name:"city_name",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"City"}),e.jsxs(q,{onValueChange:r.onChange,value:r.value,children:[e.jsx(h,{children:e.jsx(B,{"data-testid":"select-city",children:e.jsx($,{placeholder:"Select"})})}),e.jsx(O,{children:U==null?void 0:U.map(t=>e.jsx(N,{value:t.name,children:ee(t.name)},t.id))})]}),e.jsx(g,{})]})}),e.jsx(u,{control:i.control,name:"postal_code",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"Postal Code"}),e.jsx(h,{children:e.jsx(v,{...r,placeholder:"8001",maxLength:4,"data-testid":"input-postal",onChange:t=>{const s=t.target.value.replace(/\D/g,"").slice(0,4);r.onChange(s)}})}),e.jsx(M,{children:"Code postal suisse (4 chiffres)"}),e.jsx(g,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(u,{control:i.control,name:"rooms",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"Rooms"}),e.jsx(h,{children:e.jsx(v,{...r,type:"number",step:"0.5",placeholder:"2.5",value:r.value||"",onChange:t=>{const s=t.target.value;r.onChange(s===""?void 0:parseFloat(s)||void 0)},"data-testid":"input-rooms"})}),e.jsx(g,{})]})}),e.jsx(u,{control:i.control,name:"bathrooms",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"Bathrooms"}),e.jsx(h,{children:e.jsx(v,{...r,type:"number",placeholder:"1",value:r.value||"",onChange:t=>{const s=t.target.value;r.onChange(s===""?void 0:parseInt(s)||void 0)},"data-testid":"input-bathrooms"})}),e.jsx(g,{})]})}),e.jsx(u,{control:i.control,name:"surface_area",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"Surface (mÂ²)"}),e.jsx(h,{children:e.jsx(v,{...r,type:"number",placeholder:"65",value:r.value||"",onChange:t=>{const s=t.target.value;r.onChange(s===""?void 0:parseInt(s)||void 0)},"data-testid":"input-surface"})}),e.jsx(g,{})]})})]}),e.jsx(u,{control:i.control,name:"available_from",render:({field:r})=>e.jsxs(m,{children:[e.jsx(p,{children:"Available From (Optional)"}),e.jsx(h,{children:e.jsx(v,{...r,type:"date","data-testid":"input-available",min:new Date().toISOString().split("T")[0],onChange:t=>{const s=t.target.value;if(s&&s!==""){const a=new Date(s),n=new Date("1900-01-01");if(isNaN(a.getTime())||a<n){r.onChange("");return}}r.onChange(s)}})}),e.jsx(g,{})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Property Photos"}),e.jsxs("div",{className:"border-2 border-dashed rounded-md p-8 text-center",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:te,className:"hidden",id:"file-upload"}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(Ee,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG, WEBP up to 10MB"})]})]}),l.length>0&&l[f]&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-muted border-2 border-border group",children:[e.jsx("img",{src:URL.createObjectURL(l[f]),alt:`Preview ${f+1}`,className:"w-full h-full object-cover"}),e.jsx(w,{type:"button",size:"icon",variant:"destructive",className:"absolute top-2 right-2 z-10",onClick:()=>{oe(f)},children:e.jsx(Ce,{className:"h-4 w-4"})}),e.jsxs("div",{className:"absolute bottom-2 left-2 bg-black/70 text-white px-3 py-1.5 rounded-md text-sm font-medium z-10",children:[f+1," / ",l.length]}),l.length>1&&e.jsx(w,{type:"button",size:"icon",variant:"secondary",className:"absolute left-2 top-1/2 -translate-y-1/2 z-20 bg-black/40 hover:bg-black/70 backdrop-blur-sm text-white border-0 shadow-lg h-10 w-10 rounded-full transition-all hover:scale-110 active:scale-95 group-hover:bg-black/70",onClick:()=>{C(r=>r===0?l.length-1:r-1)},"aria-label":"Image prÃ©cÃ©dente",children:e.jsx(Le,{className:"h-5 w-5",strokeWidth:2.5})}),l.length>1&&e.jsx(w,{type:"button",size:"icon",variant:"secondary",className:"absolute right-2 top-1/2 -translate-y-1/2 z-20 bg-black/40 hover:bg-black/70 backdrop-blur-sm text-white border-0 shadow-lg h-10 w-10 rounded-full transition-all hover:scale-110 active:scale-95 group-hover:bg-black/70",onClick:()=>{C(r=>r===l.length-1?0:r+1)},"aria-label":"Image suivante",children:e.jsx(pe,{className:"h-5 w-5",strokeWidth:2.5})})]}),l.length>1&&e.jsx("div",{className:"flex justify-center gap-2 mt-3",children:l.map((r,t)=>e.jsx("button",{type:"button",onClick:()=>C(t),className:`h-2 rounded-full transition-all ${f===t?"w-8 bg-primary":"w-2 bg-muted-foreground/30 hover:bg-muted-foreground/50"}`,"aria-label":`Go to image ${t+1}`},t))})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(w,{type:"submit",size:"lg",disabled:D.isPending||A&&A.status!=="approved",className:"flex-1","data-testid":"button-submit",children:D.isPending?"Creating...":"Create Property"}),e.jsx(z,{href:"/dashboard/owner",children:e.jsx(w,{type:"button",variant:"outline",size:"lg",children:"Cancel"})})]})]})})]})]})})]})}):e.jsx(Y,{children:e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Only property owners can create listings"}),e.jsx(z,{href:"/",children:e.jsx(w,{children:"Go Home"})})]})})}export{Ge as default};
