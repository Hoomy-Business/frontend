import{j as e,u as ve,b as Qe}from"./query-vendor-yCE0qXS-.js";import{r as s,f as $t,u as qt}from"./react-vendor-CvpuY9Ms.js";import{h as $e,i as T,X as ee,j as Lt,u as et,c as xe,a as Kt,k as He,l as Ce,B as ie,H as zt,C as Se,d as Vt,e as Bt,b as Ue,q as L,S as we}from"./index-42cH5BrD.js";import{S as Te,M as Qt}from"./MainLayout-BNeTwvB_.js";import{S as Ht,P as Ut}from"./slider-D57ejDrc.js";import{I as tt}from"./input-BQfOhgGT.js";import{S as ke,a as Ae,b as Re,c as Ee,d as q}from"./select-BcylK2lL.js";import{B as H}from"./badge-7FXoCMHb.js";import{e as rt,f as Gt,O as qe,g as Le,h as Wt,i as at,j as st,k as nt,u as se,l as U,m as _e,n as Xt,o as ot,p as lt,q as it,r as ge,s as ct,t as Jt,v as Yt,w as Zt,F as er,x as tr,y as rr,z as ar,B as sr,E as nr,G as or,H as lr}from"./ui-vendor-3oCJfrha.js";import{A as Ge,a as We}from"./alert-DAdm-3vK.js";import"./dialog-BnpweDKq.js";import{C as ir}from"./user--iiFN26U.js";import{S as cr}from"./sparkles-8x1x_YFZ.js";import{T as dr}from"./trending-up-CNDmqqPo.js";import"./Logo-Bsxlbf95.js";import"./building-2-DW-G4Bjl.js";import"./heart-CPBaXQta.js";import"./map-pin-D9rKwPG_.js";import"./maximize-DshBwZmY.js";const ur=$e("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);const mr=$e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Xe=$e("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),pr=rt,fr=Gt,hr=nt,dt=s.forwardRef(({className:t,...a},r)=>e.jsx(qe,{className:T("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:r}));dt.displayName=qe.displayName;const vr=Lt("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ut=s.forwardRef(({side:t="right",className:a,children:r,...u},o)=>e.jsxs(hr,{children:[e.jsx(dt,{}),e.jsxs(Le,{ref:o,className:T(vr({side:t}),a),...u,children:[r,e.jsxs(Wt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ut.displayName=Le.displayName;const mt=({className:t,...a})=>e.jsx("div",{className:T("flex flex-col space-y-2 text-center sm:text-left",t),...a});mt.displayName="SheetHeader";const pt=s.forwardRef(({className:t,...a},r)=>e.jsx(at,{ref:r,className:T("text-lg font-semibold text-foreground",t),...a}));pt.displayName=at.displayName;const xr=s.forwardRef(({className:t,...a},r)=>e.jsx(st,{ref:r,className:T("text-sm text-muted-foreground",t),...a}));xr.displayName=st.displayName;var Je=1,gr=.9,_r=.8,yr=.17,Pe=.1,Ie=.999,br=.9999,jr=.99,wr=/[\\\/_+.#"@\[\(\{&]/,Nr=/[\\\/_+.#"@\[\(\{&]/g,Cr=/[\s-]/,ft=/[\s-]/g;function Me(t,a,r,u,o,d,m){if(d===a.length)return o===t.length?Je:jr;var i=`${o},${d}`;if(m[i]!==void 0)return m[i];for(var j=u.charAt(d),c=r.indexOf(j,o),h=0,x,N,p,P;c>=0;)x=Me(t,a,r,u,c+1,d+1,m),x>h&&(c===o?x*=Je:wr.test(t.charAt(c-1))?(x*=_r,p=t.slice(o,c-1).match(Nr),p&&o>0&&(x*=Math.pow(Ie,p.length))):Cr.test(t.charAt(c-1))?(x*=gr,P=t.slice(o,c-1).match(ft),P&&o>0&&(x*=Math.pow(Ie,P.length))):(x*=yr,o>0&&(x*=Math.pow(Ie,c-o))),t.charAt(c)!==a.charAt(d)&&(x*=br)),(x<Pe&&r.charAt(c-1)===u.charAt(d+1)||u.charAt(d+1)===u.charAt(d)&&r.charAt(c-1)!==u.charAt(d))&&(N=Me(t,a,r,u,c+1,d+2,m),N*Pe>x&&(x=N*Pe)),x>h&&(h=x),c=r.indexOf(j,c+1);return m[i]=h,h}function Ye(t){return t.toLowerCase().replace(ft," ")}function Sr(t,a,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,Me(t,a,Ye(t),Ye(a),0,0,{})}var he='[cmdk-group=""]',Fe='[cmdk-group-items=""]',kr='[cmdk-group-heading=""]',ht='[cmdk-item=""]',Ze=`${ht}:not([aria-disabled="true"])`,De="cmdk-item-select",ce="data-value",Ar=(t,a,r)=>Sr(t,a,r),vt=s.createContext(void 0),ye=()=>s.useContext(vt),xt=s.createContext(void 0),Ke=()=>s.useContext(xt),gt=s.createContext(void 0),_t=s.forwardRef((t,a)=>{let r=de(()=>{var l,g;return{search:"",value:(g=(l=t.value)!=null?l:t.defaultValue)!=null?g:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),u=de(()=>new Set),o=de(()=>new Map),d=de(()=>new Map),m=de(()=>new Set),i=yt(t),{label:j,children:c,value:h,onValueChange:x,filter:N,shouldFilter:p,loop:P,disablePointerSelection:w=!1,vimBindings:R=!0,...B}=t,J=se(),A=se(),ae=se(),I=s.useRef(null),C=qr();ne(()=>{if(h!==void 0){let l=h.trim();r.current.value=l,_.emit()}},[h]),ne(()=>{C(6,me)},[]);let _=s.useMemo(()=>({subscribe:l=>(m.current.add(l),()=>m.current.delete(l)),snapshot:()=>r.current,setState:(l,g,y)=>{var v,b,S,E;if(!Object.is(r.current[l],g)){if(r.current[l]=g,l==="search")Y(),oe(),C(1,K);else if(l==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let n=document.getElementById(ae);n?n.focus():(v=document.getElementById(J))==null||v.focus()}if(C(7,()=>{var n;r.current.selectedItemId=(n=W())==null?void 0:n.id,_.emit()}),y||C(5,me),((b=i.current)==null?void 0:b.value)!==void 0){let n=g??"";(E=(S=i.current).onValueChange)==null||E.call(S,n);return}}_.emit()}},emit:()=>{m.current.forEach(l=>l())}}),[]),G=s.useMemo(()=>({value:(l,g,y)=>{var v;g!==((v=d.current.get(l))==null?void 0:v.value)&&(d.current.set(l,{value:g,keywords:y}),r.current.filtered.items.set(l,Q(g,y)),C(2,()=>{oe(),_.emit()}))},item:(l,g)=>(u.current.add(l),g&&(o.current.has(g)?o.current.get(g).add(l):o.current.set(g,new Set([l]))),C(3,()=>{Y(),oe(),r.current.value||K(),_.emit()}),()=>{d.current.delete(l),u.current.delete(l),r.current.filtered.items.delete(l);let y=W();C(4,()=>{Y(),(y==null?void 0:y.getAttribute("id"))===l&&K(),_.emit()})}),group:l=>(o.current.has(l)||o.current.set(l,new Set),()=>{d.current.delete(l),o.current.delete(l)}),filter:()=>i.current.shouldFilter,label:j||t["aria-label"],getDisablePointerSelection:()=>i.current.disablePointerSelection,listId:J,inputId:ae,labelId:A,listInnerRef:I}),[]);function Q(l,g){var y,v;let b=(v=(y=i.current)==null?void 0:y.filter)!=null?v:Ar;return l?b(l,r.current.search,g):0}function oe(){if(!r.current.search||i.current.shouldFilter===!1)return;let l=r.current.filtered.items,g=[];r.current.filtered.groups.forEach(v=>{let b=o.current.get(v),S=0;b.forEach(E=>{let n=l.get(E);S=Math.max(n,S)}),g.push([v,S])});let y=I.current;X().sort((v,b)=>{var S,E;let n=v.getAttribute("id"),f=b.getAttribute("id");return((S=l.get(f))!=null?S:0)-((E=l.get(n))!=null?E:0)}).forEach(v=>{let b=v.closest(Fe);b?b.appendChild(v.parentElement===b?v:v.closest(`${Fe} > *`)):y.appendChild(v.parentElement===y?v:v.closest(`${Fe} > *`))}),g.sort((v,b)=>b[1]-v[1]).forEach(v=>{var b;let S=(b=I.current)==null?void 0:b.querySelector(`${he}[${ce}="${encodeURIComponent(v[0])}"]`);S==null||S.parentElement.appendChild(S)})}function K(){let l=X().find(y=>y.getAttribute("aria-disabled")!=="true"),g=l==null?void 0:l.getAttribute(ce);_.setState("value",g||void 0)}function Y(){var l,g,y,v;if(!r.current.search||i.current.shouldFilter===!1){r.current.filtered.count=u.current.size;return}r.current.filtered.groups=new Set;let b=0;for(let S of u.current){let E=(g=(l=d.current.get(S))==null?void 0:l.value)!=null?g:"",n=(v=(y=d.current.get(S))==null?void 0:y.keywords)!=null?v:[],f=Q(E,n);r.current.filtered.items.set(S,f),f>0&&b++}for(let[S,E]of o.current)for(let n of E)if(r.current.filtered.items.get(n)>0){r.current.filtered.groups.add(S);break}r.current.filtered.count=b}function me(){var l,g,y;let v=W();v&&(((l=v.parentElement)==null?void 0:l.firstChild)===v&&((y=(g=v.closest(he))==null?void 0:g.querySelector(kr))==null||y.scrollIntoView({block:"nearest"})),v.scrollIntoView({block:"nearest"}))}function W(){var l;return(l=I.current)==null?void 0:l.querySelector(`${ht}[aria-selected="true"]`)}function X(){var l;return Array.from(((l=I.current)==null?void 0:l.querySelectorAll(Ze))||[])}function z(l){let g=X()[l];g&&_.setState("value",g.getAttribute(ce))}function Z(l){var g;let y=W(),v=X(),b=v.findIndex(E=>E===y),S=v[b+l];(g=i.current)!=null&&g.loop&&(S=b+l<0?v[v.length-1]:b+l===v.length?v[0]:v[b+l]),S&&_.setState("value",S.getAttribute(ce))}function le(l){let g=W(),y=g==null?void 0:g.closest(he),v;for(;y&&!v;)y=l>0?Or(y,he):$r(y,he),v=y==null?void 0:y.querySelector(Ze);v?_.setState("value",v.getAttribute(ce)):Z(l)}let pe=()=>z(X().length-1),fe=l=>{l.preventDefault(),l.metaKey?pe():l.altKey?le(1):Z(1)},je=l=>{l.preventDefault(),l.metaKey?z(0):l.altKey?le(-1):Z(-1)};return s.createElement(U.div,{ref:a,tabIndex:-1,...B,"cmdk-root":"",onKeyDown:l=>{var g;(g=B.onKeyDown)==null||g.call(B,l);let y=l.nativeEvent.isComposing||l.keyCode===229;if(!(l.defaultPrevented||y))switch(l.key){case"n":case"j":{R&&l.ctrlKey&&fe(l);break}case"ArrowDown":{fe(l);break}case"p":case"k":{R&&l.ctrlKey&&je(l);break}case"ArrowUp":{je(l);break}case"Home":{l.preventDefault(),z(0);break}case"End":{l.preventDefault(),pe();break}case"Enter":{l.preventDefault();let v=W();if(v){let b=new Event(De);v.dispatchEvent(b)}}}}},s.createElement("label",{"cmdk-label":"",htmlFor:G.inputId,id:G.labelId,style:Kr},j),Ne(t,l=>s.createElement(xt.Provider,{value:_},s.createElement(vt.Provider,{value:G},l))))}),Rr=s.forwardRef((t,a)=>{var r,u;let o=se(),d=s.useRef(null),m=s.useContext(gt),i=ye(),j=yt(t),c=(u=(r=j.current)==null?void 0:r.forceMount)!=null?u:m==null?void 0:m.forceMount;ne(()=>{if(!c)return i.item(o,m==null?void 0:m.id)},[c]);let h=bt(o,d,[t.value,t.children,d],t.keywords),x=Ke(),N=te(C=>C.value&&C.value===h.current),p=te(C=>c||i.filter()===!1?!0:C.search?C.filtered.items.get(o)>0:!0);s.useEffect(()=>{let C=d.current;if(!(!C||t.disabled))return C.addEventListener(De,P),()=>C.removeEventListener(De,P)},[p,t.onSelect,t.disabled]);function P(){var C,_;w(),(_=(C=j.current).onSelect)==null||_.call(C,h.current)}function w(){x.setState("value",h.current,!0)}if(!p)return null;let{disabled:R,value:B,onSelect:J,forceMount:A,keywords:ae,...I}=t;return s.createElement(U.div,{ref:_e(d,a),...I,id:o,"cmdk-item":"",role:"option","aria-disabled":!!R,"aria-selected":!!N,"data-disabled":!!R,"data-selected":!!N,onPointerMove:R||i.getDisablePointerSelection()?void 0:w,onClick:R?void 0:P},t.children)}),Er=s.forwardRef((t,a)=>{let{heading:r,children:u,forceMount:o,...d}=t,m=se(),i=s.useRef(null),j=s.useRef(null),c=se(),h=ye(),x=te(p=>o||h.filter()===!1?!0:p.search?p.filtered.groups.has(m):!0);ne(()=>h.group(m),[]),bt(m,i,[t.value,t.heading,j]);let N=s.useMemo(()=>({id:m,forceMount:o}),[o]);return s.createElement(U.div,{ref:_e(i,a),...d,"cmdk-group":"",role:"presentation",hidden:x?void 0:!0},r&&s.createElement("div",{ref:j,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),Ne(t,p=>s.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},s.createElement(gt.Provider,{value:N},p))))}),Pr=s.forwardRef((t,a)=>{let{alwaysRender:r,...u}=t,o=s.useRef(null),d=te(m=>!m.search);return!r&&!d?null:s.createElement(U.div,{ref:_e(o,a),...u,"cmdk-separator":"",role:"separator"})}),Ir=s.forwardRef((t,a)=>{let{onValueChange:r,...u}=t,o=t.value!=null,d=Ke(),m=te(c=>c.search),i=te(c=>c.selectedItemId),j=ye();return s.useEffect(()=>{t.value!=null&&d.setState("search",t.value)},[t.value]),s.createElement(U.input,{ref:a,...u,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":j.listId,"aria-labelledby":j.labelId,"aria-activedescendant":i,id:j.inputId,type:"text",value:o?t.value:m,onChange:c=>{o||d.setState("search",c.target.value),r==null||r(c.target.value)}})}),Fr=s.forwardRef((t,a)=>{let{children:r,label:u="Suggestions",...o}=t,d=s.useRef(null),m=s.useRef(null),i=te(c=>c.selectedItemId),j=ye();return s.useEffect(()=>{if(m.current&&d.current){let c=m.current,h=d.current,x,N=new ResizeObserver(()=>{x=requestAnimationFrame(()=>{let p=c.offsetHeight;h.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return N.observe(c),()=>{cancelAnimationFrame(x),N.unobserve(c)}}},[]),s.createElement(U.div,{ref:_e(d,a),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":i,"aria-label":u,id:j.listId},Ne(t,c=>s.createElement("div",{ref:_e(m,j.listInnerRef),"cmdk-list-sizer":""},c)))}),Tr=s.forwardRef((t,a)=>{let{open:r,onOpenChange:u,overlayClassName:o,contentClassName:d,container:m,...i}=t;return s.createElement(rt,{open:r,onOpenChange:u},s.createElement(nt,{container:m},s.createElement(qe,{"cmdk-overlay":"",className:o}),s.createElement(Le,{"aria-label":t.label,"cmdk-dialog":"",className:d},s.createElement(_t,{ref:a,...i}))))}),Mr=s.forwardRef((t,a)=>te(r=>r.filtered.count===0)?s.createElement(U.div,{ref:a,...t,"cmdk-empty":"",role:"presentation"}):null),Dr=s.forwardRef((t,a)=>{let{progress:r,children:u,label:o="Loading...",...d}=t;return s.createElement(U.div,{ref:a,...d,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},Ne(t,m=>s.createElement("div",{"aria-hidden":!0},m)))}),D=Object.assign(_t,{List:Fr,Item:Rr,Input:Ir,Group:Er,Separator:Pr,Dialog:Tr,Empty:Mr,Loading:Dr});function Or(t,a){let r=t.nextElementSibling;for(;r;){if(r.matches(a))return r;r=r.nextElementSibling}}function $r(t,a){let r=t.previousElementSibling;for(;r;){if(r.matches(a))return r;r=r.previousElementSibling}}function yt(t){let a=s.useRef(t);return ne(()=>{a.current=t}),a}var ne=typeof window>"u"?s.useEffect:s.useLayoutEffect;function de(t){let a=s.useRef();return a.current===void 0&&(a.current=t()),a}function te(t){let a=Ke(),r=()=>t(a.snapshot());return s.useSyncExternalStore(a.subscribe,r,r)}function bt(t,a,r,u=[]){let o=s.useRef(),d=ye();return ne(()=>{var m;let i=(()=>{var c;for(let h of r){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(c=h.current.textContent)==null?void 0:c.trim():o.current}})(),j=u.map(c=>c.trim());d.value(t,i,j),(m=a.current)==null||m.setAttribute(ce,i),o.current=i}),o}var qr=()=>{let[t,a]=s.useState(),r=de(()=>new Map);return ne(()=>{r.current.forEach(u=>u()),r.current=new Map},[t]),(u,o)=>{r.current.set(u,o),a({})}};function Lr(t){let a=t.type;return typeof a=="function"?a(t.props):"render"in a?a.render(t.props):t}function Ne({asChild:t,children:a},r){return t&&s.isValidElement(a)?s.cloneElement(Lr(a),{ref:a.ref},r(a.props.children)):r(a)}var Kr={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const jt=s.forwardRef(({className:t,...a},r)=>e.jsx(D,{ref:r,className:T("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...a}));jt.displayName=D.displayName;const zr=s.forwardRef(({className:t,...a},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Te,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(D.Input,{ref:r,className:T("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...a})]}));zr.displayName=D.Input.displayName;const wt=s.forwardRef(({className:t,...a},r)=>e.jsx(D.List,{ref:r,className:T("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...a}));wt.displayName=D.List.displayName;const Oe=s.forwardRef((t,a)=>e.jsx(D.Empty,{ref:a,className:"py-6 text-center text-sm",...t}));Oe.displayName=D.Empty.displayName;const Nt=s.forwardRef(({className:t,...a},r)=>e.jsx(D.Group,{ref:r,className:T("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...a}));Nt.displayName=D.Group.displayName;const Vr=s.forwardRef(({className:t,...a},r)=>e.jsx(D.Separator,{ref:r,className:T("-mx-1 h-px bg-border",t),...a}));Vr.displayName=D.Separator.displayName;const Ct=s.forwardRef(({className:t,...a},r)=>e.jsx(D.Item,{ref:r,className:T("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...a}));Ct.displayName=D.Item.displayName;var ze="Popover",[St,Ca]=Xt(ze,[ot]),be=ot(),[Br,re]=St(ze),kt=t=>{const{__scopePopover:a,children:r,open:u,defaultOpen:o,onOpenChange:d,modal:m=!1}=t,i=be(a),j=s.useRef(null),[c,h]=s.useState(!1),[x=!1,N]=sr({prop:u,defaultProp:o,onChange:d});return e.jsx(nr,{...i,children:e.jsx(Br,{scope:a,contentId:se(),triggerRef:j,open:x,onOpenChange:N,onOpenToggle:s.useCallback(()=>N(p=>!p),[N]),hasCustomAnchor:c,onCustomAnchorAdd:s.useCallback(()=>h(!0),[]),onCustomAnchorRemove:s.useCallback(()=>h(!1),[]),modal:m,children:r})})};kt.displayName=ze;var At="PopoverAnchor",Qr=s.forwardRef((t,a)=>{const{__scopePopover:r,...u}=t,o=re(At,r),d=be(r),{onCustomAnchorAdd:m,onCustomAnchorRemove:i}=o;return s.useEffect(()=>(m(),()=>i()),[m,i]),e.jsx(lt,{...d,...u,ref:a})});Qr.displayName=At;var Rt="PopoverTrigger",Et=s.forwardRef((t,a)=>{const{__scopePopover:r,...u}=t,o=re(Rt,r),d=be(r),m=it(a,o.triggerRef),i=e.jsx(U.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Mt(o.open),...u,ref:m,onClick:ge(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?i:e.jsx(lt,{asChild:!0,...d,children:i})});Et.displayName=Rt;var Ve="PopoverPortal",[Hr,Ur]=St(Ve,{forceMount:void 0}),Pt=t=>{const{__scopePopover:a,forceMount:r,children:u,container:o}=t,d=re(Ve,a);return e.jsx(Hr,{scope:a,forceMount:r,children:e.jsx(ct,{present:r||d.open,children:e.jsx(or,{asChild:!0,container:o,children:u})})})};Pt.displayName=Ve;var ue="PopoverContent",It=s.forwardRef((t,a)=>{const r=Ur(ue,t.__scopePopover),{forceMount:u=r.forceMount,...o}=t,d=re(ue,t.__scopePopover);return e.jsx(ct,{present:u||d.open,children:d.modal?e.jsx(Wr,{...o,ref:a}):e.jsx(Xr,{...o,ref:a})})});It.displayName=ue;var Gr=lr("PopoverContent.RemoveScroll"),Wr=s.forwardRef((t,a)=>{const r=re(ue,t.__scopePopover),u=s.useRef(null),o=it(a,u),d=s.useRef(!1);return s.useEffect(()=>{const m=u.current;if(m)return Jt(m)},[]),e.jsx(Yt,{as:Gr,allowPinchZoom:!0,children:e.jsx(Ft,{...t,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(t.onCloseAutoFocus,m=>{var i;m.preventDefault(),d.current||(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ge(t.onPointerDownOutside,m=>{const i=m.detail.originalEvent,j=i.button===0&&i.ctrlKey===!0,c=i.button===2||j;d.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ge(t.onFocusOutside,m=>m.preventDefault(),{checkForDefaultPrevented:!1})})})}),Xr=s.forwardRef((t,a)=>{const r=re(ue,t.__scopePopover),u=s.useRef(!1),o=s.useRef(!1);return e.jsx(Ft,{...t,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:d=>{var m,i;(m=t.onCloseAutoFocus)==null||m.call(t,d),d.defaultPrevented||(u.current||(i=r.triggerRef.current)==null||i.focus(),d.preventDefault()),u.current=!1,o.current=!1},onInteractOutside:d=>{var j,c;(j=t.onInteractOutside)==null||j.call(t,d),d.defaultPrevented||(u.current=!0,d.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const m=d.target;((c=r.triggerRef.current)==null?void 0:c.contains(m))&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&o.current&&d.preventDefault()}})}),Ft=s.forwardRef((t,a)=>{const{__scopePopover:r,trapFocus:u,onOpenAutoFocus:o,onCloseAutoFocus:d,disableOutsidePointerEvents:m,onEscapeKeyDown:i,onPointerDownOutside:j,onFocusOutside:c,onInteractOutside:h,...x}=t,N=re(ue,r),p=be(r);return Zt(),e.jsx(er,{asChild:!0,loop:!0,trapped:u,onMountAutoFocus:o,onUnmountAutoFocus:d,children:e.jsx(tr,{asChild:!0,disableOutsidePointerEvents:m,onInteractOutside:h,onEscapeKeyDown:i,onPointerDownOutside:j,onFocusOutside:c,onDismiss:()=>N.onOpenChange(!1),children:e.jsx(rr,{"data-state":Mt(N.open),role:"dialog",id:N.contentId,...p,...x,ref:a,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Tt="PopoverClose",Jr=s.forwardRef((t,a)=>{const{__scopePopover:r,...u}=t,o=re(Tt,r);return e.jsx(U.button,{type:"button",...u,ref:a,onClick:ge(t.onClick,()=>o.onOpenChange(!1))})});Jr.displayName=Tt;var Yr="PopoverArrow",Zr=s.forwardRef((t,a)=>{const{__scopePopover:r,...u}=t,o=be(r);return e.jsx(ar,{...o,...u,ref:a})});Zr.displayName=Yr;function Mt(t){return t?"open":"closed"}var ea=kt,ta=Et,ra=Pt,Dt=It;const aa=ea,sa=ta,Ot=s.forwardRef(({className:t,align:a="center",sideOffset:r=4,...u},o)=>e.jsx(ra,{children:e.jsx(Dt,{ref:o,align:a,sideOffset:r,className:T("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...u})}));Ot.displayName=Dt.displayName;function na({value:t,onChange:a,onSelect:r,cantonCode:u,placeholder:o="Rechercher une ville...",disabled:d=!1,className:m,error:i=!1}){const[j,c]=s.useState(!1),[h,x]=s.useState(t),N=s.useRef(null),[p,P]=s.useState(null),{getCityName:w}=et();s.useEffect(()=>{x(t)},[t]);const{data:R=[],isLoading:B}=ve({queryKey:["/locations/cities/autocomplete",h,u],queryFn:async()=>{if(!h||h.trim().length<1)return[];const _=new URLSearchParams({query:h});return u&&_.append("canton_code",u),xe("GET",`/locations/cities/autocomplete?${_.toString()}`)},enabled:h.trim().length>=1&&j,staleTime:1e3*60}),J=_=>{const G=_.target.value;x(G),a(G),c(!0),P(null)},A=_=>{P(_),x(w(_.name)),a(_.name),r(_),c(!1)},ae=()=>{setTimeout(()=>{c(!1)},200)},I=()=>{h.trim().length>=1&&c(!0)},C=p!==null||h&&Array.isArray(R)&&R.some(_=>_&&_.name&&(w(_.name)===h||_.name===h))||!h||h.trim().length===0;return e.jsxs("div",{className:T("relative",m),children:[e.jsxs(aa,{open:j,onOpenChange:c,children:[e.jsx(sa,{asChild:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx(tt,{ref:N,value:h,onChange:J,onFocus:I,onBlur:ae,placeholder:o,disabled:d,className:T(i||!C&&h.trim().length>0?"border-destructive":"")}),e.jsx(ur,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"})]})}),e.jsx(Ot,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:e.jsx(jt,{children:e.jsx(wt,{children:B?e.jsx(Oe,{children:"Recherche en cours..."}):R.length===0?e.jsx(Oe,{children:h.trim().length<1?"Tapez au moins 1 caractère":"Aucune ville trouvée"}):e.jsx(Nt,{children:R.map(_=>e.jsxs(Ct,{value:_.name,onSelect:()=>A(_),className:"cursor-pointer",children:[e.jsx(ir,{className:T("mr-2 h-4 w-4",(p==null?void 0:p.id)===_.id?"opacity-100":"opacity-0")}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:w(_.name)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[_.postal_code," • ",_.canton_name||_.canton_code]})]})]},_.id))})})})})]}),!C&&h.trim().length>0&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:"Veuillez sélectionner une ville dans la liste"})]})}function Sa(){var E;const t=$t(),a=new URLSearchParams(t),[,r]=qt(),{isAuthenticated:u}=Kt(),{t:o,getCantonName:d,getCityName:m}=et(),[i,j]=s.useState(a.get("canton")||"___all___"),[c,h]=s.useState(a.get("city_id")||"___all___"),[x,N]=s.useState(a.get("property_type")||"___all___"),[p,P]=s.useState([a.get("max_price")?parseInt(a.get("max_price")):5e3]),[w,R]=s.useState(a.get("min_rooms")||"___all___"),[B,J]=s.useState(a.get("search")||""),[A,ae]=s.useState(a.get("search")||""),I=s.useRef(null);s.useEffect(()=>(I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{ae(B)},100),()=>{I.current&&clearTimeout(I.current)}),[B]);const C=s.useRef(!0),_=s.useRef("");s.useEffect(()=>{if(C.current){C.current=!1;const f={};i&&i!=="___all___"&&(f.canton=i),c&&c!=="___all___"&&(f.city_id=c),x&&x!=="___all___"&&(f.property_type=x),(p==null?void 0:p[0])!==void 0&&p[0]<5e3&&(f.max_price=p[0].toString()),w&&w!=="___all___"&&(f.min_rooms=w),A.trim()&&(f.search=A.trim()),_.current=new URLSearchParams(f).toString();return}const n=setTimeout(()=>{const f={};i&&i!=="___all___"&&(f.canton=i),c&&c!=="___all___"&&(f.city_id=c),x&&x!=="___all___"&&(f.property_type=x),(p==null?void 0:p[0])!==void 0&&p[0]<5e3&&(f.max_price=p[0].toString()),w&&w!=="___all___"&&(f.min_rooms=w),A.trim()&&(f.search=A.trim());const k=new URLSearchParams(f).toString();if(_.current!==k){_.current=k;const O=k?`/properties?${k}`:"/properties";r(O)}},300);return()=>clearTimeout(n)},[i,c,x,p,w,A,r]);const{data:G}=ve({queryKey:["/locations/cantons"],queryFn:async()=>{const n=await xe("GET","/locations/cantons");return Array.isArray(n)?n:n!=null&&n.cantons&&Array.isArray(n.cantons)?n.cantons:[]},staleTime:1e3*60*60,gcTime:1e3*60*60*24}),Q=Array.isArray(G)?G:[],{data:oe}=ve({queryKey:[`/locations/cities/${i}`],enabled:!!i&&i!=="___all___",queryFn:async()=>{if(!i||i==="___all___")throw new Error("Canton required");const n=await xe("GET",`/locations/cities?canton=${i}`);return Array.isArray(n)?n:n!=null&&n.cities&&Array.isArray(n.cities)?n.cities:[]},staleTime:1e3*60*60,gcTime:1e3*60*60*24}),K=Array.isArray(oe)?oe:[],Y=s.useMemo(()=>{const n={};i&&i!=="___all___"&&(n.canton=i),c&&c!=="___all___"&&(n.city_id=c),x&&x!=="___all___"&&(n.property_type=x),(p==null?void 0:p[0])!==void 0&&p[0]<5e3&&(n.max_price=p[0].toString()),w&&w!=="___all___"&&(n.min_rooms=w),A.trim()&&(n.search=A.trim());const f=new URLSearchParams(n).toString();return f?`?${f}`:""},[i,c,x,p,w,A]),{data:me,isLoading:W,error:X}=ve({queryKey:["/properties",Y],enabled:!Y.includes("create"),queryFn:async()=>{const n=He(),f={};n&&(f.Authorization=`Bearer ${n}`);const O=Ce().replace(/\/+$/,""),V=`/properties${Y}`.replace(/^\/+/,""),F=`${O}/${V}`;if(F.includes("/properties/create")||F.includes("/properties/edit"))throw new Error(`Invalid API endpoint: ${F}`);const M=await fetch(F,{headers:f});if(!M.ok){const Be=await M.json().catch(()=>({error:M.statusText}));throw new Error(Be.error||Be.message||M.statusText)}const $=await M.json();return Array.isArray($)?$:$!=null&&$.properties&&Array.isArray($.properties)?$.properties:[]},staleTime:1e3*60*3,gcTime:1e3*60*15}),z=Array.isArray(me)?me:[],{data:Z}=ve({queryKey:["/favorites"],enabled:u,retry:!1,queryFn:async()=>{const n=He();if(!n)throw new Error("No authentication token");const f={Authorization:`Bearer ${n}`},V=`${Ce().replace(/\/+$/,"")}/favorites`,F=await fetch(V,{headers:f});if(!F.ok){const $=await F.json().catch(()=>({error:F.statusText}));throw new Error($.error||$.message||F.statusText)}const M=await F.json();return M&&Array.isArray(M.favorites)?M.favorites:Array.isArray(M)?M:[]},staleTime:1e3*60*10,gcTime:1e3*60*30,select:n=>n?Array.isArray(n)?n:n&&typeof n=="object"&&n.favorites&&Array.isArray(n.favorites)?n.favorites:[]:[]}),le=s.useMemo(()=>!Z||!Array.isArray(Z)?new Set:new Set(Z.map(n=>n.id)),[Z]),pe=Qe({mutationFn:async n=>xe("POST","/favorites",{property_id:n}),onMutate:async n=>{await L.cancelQueries({queryKey:["/favorites"]});const f=L.getQueryData(["/favorites"]);if(f){const k=L.getQueryCache();let O;for(const V of k.getAll())if(V.queryKey[0]==="/properties"&&Array.isArray(V.state.data)&&(O=V.state.data.find(F=>F.id===n),O))break;!O&&z&&(O=z.find(V=>V.id===n)),O&&L.setQueryData(["/favorites"],[...f,O])}return{previousFavorites:f}},onError:(n,f,k)=>{k!=null&&k.previousFavorites&&L.setQueryData(["/favorites"],k.previousFavorites)},onSettled:()=>{L.invalidateQueries({queryKey:["/favorites"]})}}),fe=Qe({mutationFn:async n=>xe("DELETE",`/favorites/${n}`),onMutate:async n=>{await L.cancelQueries({queryKey:["/favorites"]});const f=L.getQueryData(["/favorites"]);return f&&L.setQueryData(["/favorites"],f.filter(k=>k.id!==n)),{previousFavorites:f}},onError:(n,f,k)=>{k!=null&&k.previousFavorites&&L.setQueryData(["/favorites"],k.previousFavorites)},onSettled:()=>{L.invalidateQueries({queryKey:["/favorites"]})}}),je=s.useCallback(n=>{if(!u){r("/login?redirect=/properties");return}le.has(n)?fe.mutate(n):pe.mutate(n)},[u,le,pe,fe,r]),l=s.useMemo(()=>{if(!z)return[];if(!A.trim())return z;const n=A.toLowerCase().trim();return n.length===0?z:z.filter(f=>{var F,M,$;const k=((F=f.title)==null?void 0:F.toLowerCase())||"",O=((M=f.city_name)==null?void 0:M.toLowerCase())||"",V=(($=f.address)==null?void 0:$.toLowerCase())||"";return k.includes(n)||O.includes(n)||V.includes(n)})},[z,A]),g=s.useCallback(n=>{j(n),h("___all___")},[]),y=s.useCallback(()=>{j("___all___"),h("___all___"),N("___all___"),P([5e3]),R("___all___")},[]),v=s.useMemo(()=>{var n;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:o("properties.canton")}),e.jsxs(ke,{value:i,onValueChange:g,children:[e.jsx(Ae,{"data-testid":"select-canton",className:"min-w-0",children:e.jsx(Re,{placeholder:o("properties.canton.all"),className:"truncate"})}),e.jsxs(Ee,{children:[e.jsx(q,{value:"___all___",children:o("properties.canton.all")}),Q==null?void 0:Q.map(f=>e.jsx(q,{value:f.code,children:d(f)},f.code))]})]})]}),i&&i!=="___all___"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:o("properties.city")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(na,{value:c!=="___all___"&&c&&Array.isArray(K)&&K.length>0&&((n=K.find(f=>f.id.toString()===c))==null?void 0:n.name)||"",onChange:f=>{f||h("___all___")},onSelect:f=>{h(f.id.toString())},cantonCode:i!=="___all___"?i:void 0,placeholder:o("properties.city.all")}),c!=="___all___"&&e.jsx(ie,{variant:"outline",size:"sm",className:"w-full",onClick:()=>h("___all___"),children:o("properties.city.all")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:o("properties.type")}),e.jsxs(ke,{value:x,onValueChange:N,children:[e.jsx(Ae,{"data-testid":"select-type",className:"min-w-0",children:e.jsx(Re,{placeholder:o("properties.type.all"),className:"truncate"})}),e.jsxs(Ee,{children:[e.jsx(q,{value:"___all___",children:o("properties.type.all")}),e.jsx(q,{value:"apartment",children:"Apartment"}),e.jsx(q,{value:"house",children:"House"}),e.jsx(q,{value:"studio",children:"Studio"}),e.jsx(q,{value:"room",children:"Room"}),e.jsx(q,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:p&&p[0]!==void 0&&p[0]>=5e3?"5000+/mois":`CHF ${((p==null?void 0:p[0])??5e3).toLocaleString()}/mois`}),e.jsx(Ht,{value:p,onValueChange:P,max:5e3,min:200,step:100,"data-testid":"slider-price",className:"cursor-grab active:cursor-grabbing"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:o("properties.rooms.min")}),e.jsxs(ke,{value:w,onValueChange:R,children:[e.jsx(Ae,{"data-testid":"select-rooms",className:"min-w-0",children:e.jsx(Re,{placeholder:o("properties.rooms.any"),className:"truncate"})}),e.jsxs(Ee,{children:[e.jsx(q,{value:"___all___",children:o("properties.rooms.any")}),e.jsx(q,{value:"1",children:"1+"}),e.jsx(q,{value:"2",children:"2+"}),e.jsx(q,{value:"3",children:"3+"}),e.jsx(q,{value:"4",children:"4+"})]})]})]}),e.jsx(ie,{variant:"outline",className:"w-full",onClick:y,"data-testid":"button-clear-filters",children:o("properties.clear")})]})},[i,c,x,p,w,Q,K,g,y,o,d,m]),b=s.useMemo(()=>{let n=0;return i&&i!=="___all___"&&n++,c&&c!=="___all___"&&n++,x&&x!=="___all___"&&n++,p&&p[0]!==void 0&&p[0]<5e3&&n++,w&&w!=="___all___"&&n++,A.trim()&&n++,n},[i,c,x,p,w,A]),S=s.useMemo(()=>{if(!l||l.length===0)return 0;const n=l.reduce((f,k)=>f+(k.price||0),0);return Math.round(n/l.length)},[l]);return e.jsx(Qt,{children:e.jsxs("div",{className:"container mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2 flex items-center gap-3","data-testid":"text-page-title",children:[e.jsx(zt,{className:"h-6 w-6 sm:h-7 sm:w-7 text-primary"}),o("properties.title")]}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:W?e.jsx("span",{className:"flex items-center gap-2",children:e.jsx("span",{className:"animate-pulse",children:"Chargement..."})}):l.length===1?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(cr,{className:"h-4 w-4 text-primary"}),o("properties.subtitle.singular",{count:l.length})]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-4 w-4 text-primary"}),o("properties.subtitle.plural",{count:l.length}),S>0&&e.jsxs("span",{className:"ml-2 text-primary font-semibold",children:["• Prix moyen: CHF ",S.toLocaleString(),"/mois"]})]})})]})}),b>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[e.jsxs(H,{variant:"secondary",className:"gap-1",children:[e.jsx(mr,{className:"h-3 w-3"}),b," filtre",b>1?"s":""," actif",b>1?"s":""]}),i&&i!=="___all___"&&Array.isArray(Q)&&Q.length>0&&e.jsxs(H,{variant:"outline",className:"gap-1",children:[d(Q.find(n=>n.code===i)||{code:i,name_fr:i,name_de:i}),e.jsx("button",{onClick:()=>g("___all___"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(ee,{className:"h-3 w-3"})})]}),c&&c!=="___all___"&&Array.isArray(K)&&K.length>0&&e.jsxs(H,{variant:"outline",className:"gap-1",children:[m(((E=K.find(n=>n.id.toString()===c))==null?void 0:E.name)||""),e.jsx("button",{onClick:()=>h("___all___"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(ee,{className:"h-3 w-3"})})]}),x&&x!=="___all___"&&e.jsxs(H,{variant:"outline",className:"gap-1",children:[x,e.jsx("button",{onClick:()=>N("___all___"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(ee,{className:"h-3 w-3"})})]}),p&&p[0]!==void 0&&p[0]<5e3&&e.jsxs(H,{variant:"outline",className:"gap-1",children:[(p[0]??5e3).toLocaleString(),"/mois",e.jsx("button",{onClick:()=>P([5e3]),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(ee,{className:"h-3 w-3"})})]}),p&&p[0]!==void 0&&p[0]>=5e3&&e.jsx(H,{variant:"outline",children:"5000+/mois"}),w&&w!=="___all___"&&e.jsxs(H,{variant:"outline",className:"gap-1",children:[w,"+ pièces",e.jsx("button",{onClick:()=>R("___all___"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(ee,{className:"h-3 w-3"})})]}),A.trim()&&e.jsxs(H,{variant:"outline",className:"gap-1",children:['"',A,'"',e.jsx("button",{onClick:()=>J(""),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:e.jsx(ee,{className:"h-3 w-3"})})]}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:y,className:"h-6 text-xs",children:"Tout effacer"})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6",children:[e.jsx("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:e.jsxs(Se,{className:"sticky top-20 border-2",children:[e.jsx(Vt,{className:"bg-muted/50",children:e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-5 w-5 text-primary"}),o("properties.filters"),b>0&&e.jsx(H,{variant:"default",className:"ml-auto",children:b})]})}),e.jsx(Ue,{className:"pt-6",children:v})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx(Te,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(tt,{placeholder:o("properties.search.placeholder"),value:B,onChange:n=>J(n.target.value),className:"pl-9 sm:pl-10 h-9 sm:h-10 text-sm sm:text-base","data-testid":"input-search"})]}),e.jsxs(pr,{children:[e.jsx(fr,{asChild:!0,children:e.jsxs(ie,{variant:"outline",className:"lg:hidden h-9 sm:h-10 active:scale-95 transition-transform duration-100 relative",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:o("properties.filters")}),e.jsx("span",{className:"xs:hidden",children:"Filters"}),b>0&&e.jsx(H,{variant:"default",className:"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center text-xs",children:b})]})}),e.jsxs(ut,{side:"left",children:[e.jsx(mt,{children:e.jsx(pt,{children:o("properties.filters")})}),e.jsx("div",{className:"mt-6",children:v})]})]})]}),X?e.jsx(Ge,{variant:"destructive",className:"mb-4",children:e.jsx(We,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"Erreur de chargement"}),e.jsx("p",{className:"text-sm",children:X instanceof Error?X.message:"Erreur inconnue"}),e.jsxs("p",{className:"text-xs mt-2 text-muted-foreground",children:["URL: ",Ce(),"/properties",Y]})]}),e.jsx(ie,{variant:"outline",size:"sm",onClick:()=>L.invalidateQueries({queryKey:["/properties"]}),children:"Réessayer"})]})})}):W?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(n=>e.jsxs(Se,{children:[e.jsx(we,{className:"aspect-[4/3] w-full"}),e.jsxs(Ue,{className:"p-4 space-y-3",children:[e.jsx(we,{className:"h-5 w-3/4"}),e.jsx(we,{className:"h-4 w-1/2"}),e.jsx(we,{className:"h-4 w-full"})]})]},n))}):l.length===0?e.jsx(Se,{className:"p-6 sm:p-8 md:p-12 text-center border-dashed",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center",children:e.jsx(Te,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:o("properties.empty")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:o("properties.empty.subtitle")}),b>0&&e.jsx(Ge,{className:"max-w-md mx-auto mb-4",children:e.jsx(We,{className:"text-center",children:"Aucune propriété ne correspond à vos critères. Essayez de modifier vos filtres."})}),e.jsxs(ie,{onClick:y,variant:"outline",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Réinitialiser les filtres"]})]})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5 md:gap-6",children:l.map(n=>e.jsx(Ut,{property:n,isFavorited:u?le.has(n.id):!1,onFavoriteToggle:je},n.id))})]})]})]})})}export{Sa as default};
